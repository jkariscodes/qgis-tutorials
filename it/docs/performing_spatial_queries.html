<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Utilizzare le interrogazioni spaziali &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Analisi di prossimità" href="nearest_neighbor_analysis.html" />
    <link rel="prev" title="Realizzare Heatmaps (mappe di concentrazione)" href="creating_heatmaps.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduzione</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Realizzare e stampare una mappa</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Lavorare con gli Attributi</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importare fogli elettronici o file CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Usare i Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Cercare e scaricare i dati di OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Principali tematizzazioni per dati vettoriali</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calcolare la Lunghezza Lineare e le Statistiche</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Raster, elementi base: tematizzazione ed analisi</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mosaici e operazioni di ritaglio con i layer raster</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Lavorare con i dati del terrreno</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Lavorare con i dati WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenziare mappe e carte geografiche raster</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenziare immagini aeree</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Vettorializzare mappe raster</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Realizzare unioni tabellari</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realizzare unioni spaziali (Spatial Joins)</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Analisi dei Punti in un Poligono</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Realizzare Heatmaps (mappe di concentrazione)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Utilizzare le interrogazioni spaziali</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Analisi di prossimità</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Campionare i dati di un raster usando punti o poligoni</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolazione di dati puntuali</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/automating_map_creation.html">Automating Map Creation with Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Usare il browser di QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Calcolare il numero dei vertici in un layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Aprire file in formato BIL, BIP o BSQ in QGIS.</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Primi passi con la programmazione Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Building a Python Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Trovare i poligoni confinanti in un layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Realizzare unioni tabellari (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Risorse disponibili per l&#8217;apprendimento di QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Fonti dei dati</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="creating_heatmaps.html" title="Previous Chapter: Realizzare Heatmaps (mappe di concentrazione)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Realizzare Heatm...</span>
    </a>
  </li>
  <li>
    <a href="nearest_neighbor_analysis.html" title="Next Chapter: Analisi di prossimità"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Analisi di pross... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<h4>Subscribe to my mailing list</h4>
<p>Get occasional emails when I post new material or announce training events.</p>
<form action="https://spatialthoughts.us20.list-manage.com/subscribe/post?u=59d493847a7c7c2dbf12b21e6&amp;id=8fb09ab55c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_59d493847a7c7c2dbf12b21e6_8fb09ab55c" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="performing-spatial-queries">
<h1>Utilizzare le interrogazioni spaziali<a class="headerlink" href="#performing-spatial-queries" title="Link a questa intestazione">¶</a></h1>
<p>Le interrogazioni spaziali sono il fondamento di molte varietà di metodi di analisi GIS. In QGIS queste funzioni sono disponibili attraverso il plugin Interrogazione Spaziale.</p>
<div class="section" id="overview-of-the-task">
<h2>Descrizione dell&#8217;esercizio<a class="headerlink" href="#overview-of-the-task" title="Link a questa intestazione">¶</a></h2>
<p>Lavoreremo con 2 dataset - un layer lineare che rappresenta i fiumi e un layer puntuale che descrive le città. L&#8217;obiettivo è quello di lanciare un&#8217;interrogazione spaziale per trovare tutte le città che non distano più di 10 chilometri da un fiume.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Altri aspetti che avremo modo di apprendere nel corso dell&#8217;esercizio<a class="headerlink" href="#other-skills-you-will-learn" title="Link a questa intestazione">¶</a></h3>
<ul class="simple">
<li><p class="first">Aprire dei file archivio .zip direttamente in QGIS.</p>
</li>
<li><p class="first">Scegliere un appropriato sistema di proiezione e riproiettare un dato vettoriale.</p>
</li>
<li><p class="first">Creare dei buffer</p>
</li>
<li><p class="first">Selezionare geometrie usando espressioni SQL-Like.</p>
</li>
<li><p class="first">Convertire uno shapefile in un file KML.</p>
</li>
<li><p class="first">Verificare la validità dei nostri risultati mediante Google Earth.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Ottenere i dati necessari<a class="headerlink" href="#get-the-data" title="Link a questa intestazione">¶</a></h2>
<p>Useremo i file <code class="docutils literal"><span class="pre">ne_10m_rivers_lake_centerlines</span></code>  e <code class="docutils literal"><span class="pre">10m_populated_places_simple</span></code> . Entrambi dataset tratti da Natural Earth.</p>
<p>Download <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/physical/ne_10m_rivers_lake_centerlines.zip">Rivers and Lake Centerlines</a></p>
<p>Scaricate <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places_simple.zip">Populated Places</a>.</p>
<p>Fonte Dati: <a class="reference internal" href="credits.html#naturalearth" id="id1">[NATURALEARTH]</a></p>
</div>
<div class="section" id="procedure">
<h2>Procedimento<a class="headerlink" href="#procedure" title="Link a questa intestazione">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">Dopo che avete scaricato i dati, aprite QGIS. Andate su <span class="menuselection">Layer ‣ Aggiungi Vettore...</span>.</p>
</li>
</ol>
<img alt="../_images/1126.png" class="align-center" src="../_images/1126.png" />
<ol class="arabic simple" start="2">
<li><p class="first">Fate Click su <span class="guilabel">Sfoglia</span> e portatevi nella cartella dove avete scaricato i file .zip.</p>
</li>
</ol>
<img alt="../_images/279.png" class="align-center" src="../_images/279.png" />
<ol class="arabic simple" start="3">
<li><p class="first">Trovate i file .zip scaricati. Tenete premuto il tasto <code class="kbd docutils literal"><span class="pre">Shift</span></code> e fate click su entrambi i file zip per selezionarli. Click su <span class="guilabel">Apri</span>.</p>
</li>
</ol>
<img alt="../_images/346.png" class="align-center" src="../_images/346.png" />
<ol class="arabic simple" start="4">
<li><p class="first">Apparirà una finestra di dialogo che vi chiederà di selezionare il layer da aprire tra i file zip. Selezionate <code class="docutils literal"><span class="pre">ne_10m_rivers_lake_centerlines.shp</span></code> e fate click su  <span class="guilabel">OK</span>.</p>
</li>
</ol>
<img alt="../_images/427.png" class="align-center" src="../_images/427.png" />
<ol class="arabic simple" start="5">
<li><p class="first">Visto che avete operato una selezione multipla, ripetete l&#8217;operazione per il file successivo. Selezionate  10m_populated_places_simple.shp  e fate click su <span class="guilabel">OK</span>.</p>
</li>
</ol>
<img alt="../_images/528.png" class="align-center" src="../_images/528.png" />
<ol class="arabic simple" start="6">
<li><p class="first">Potrete vedere ora entrambi gli shapefile caricati in QGIS.</p>
</li>
</ol>
<img alt="../_images/626.png" class="align-center" src="../_images/626.png" />
<ol class="arabic simple" start="7">
<li><p class="first">Genereremo dei buffer sia nel  layer puntuale che in quello lineare. Lo strumento di geoprecessing per il <cite>Buffer</cite> in QGIS usa la numerazione metrico decimale ordinaria per calcolare la misura del buffer. Ma i layer con cui stiamo lavorando sono in un <cite>Sistema di Riferimento (SR) basato su Coordinate Geografiche</cite> che, com&#8217;è noto, vengono calcolate in  <cite>gradi</cite>. . Questo non soddisfa le esigenze delle nostre analisi che prevedono invece l&#8217;uso di unità di misura come i <cite>metri</cite> o i <cite>chilometri</cite>.  Per risolvere questo problema dobbiamo allora ri-proiettare i nostri layer su un <cite>Sistema di Coordinate Proiettare (SR)</cite>. Click sul tasto destro del mouse sul layer  <code class="docutils literal"><span class="pre">10m_populated_places_simple</span> <span class="pre">layer</span></code>  e quindi scegliete  <span class="guilabel">Salva con Nome</span>.</p>
</li>
</ol>
<img alt="../_images/726.png" class="align-center" src="../_images/726.png" />
<ol class="arabic simple" start="8">
<li><p class="first">Nella finestra di dialogo <span class="guilabel">Salva i vettori come...</span> scegliete il tasto <span class="guilabel">Sfoglia</span> accanto alla voce <span class="guilabel">Salva con Nome</span> e assegnate al nuovo file il nome di <code class="docutils literal"><span class="pre">populated_places_reprojected.shp</span></code> . Ora fate click sul successivo tasto <span class="guilabel">Sfoglia</span> vicino alla voce  <span class="guilabel">Sist Rif</span>.</p>
</li>
</ol>
<img alt="../_images/823.png" class="align-center" src="../_images/823.png" />
<ol class="arabic simple" start="9">
<li><p class="first">Ora dobbiamo scegliere un Sistema di Riferimento (SR) che sia adeguato ai nostri scopi. Per creare dei buffer una proiezione Azimutale Equidistante dovrebbe essere la scelta migliore. Nel nostro caso, considerato che il dataset è globale, sceglieremo una proiezione planetaria. Nella finestra di dialogo <span class="guilabel">Selettore di sistema di riferimento</span> avviate la ricerca digitando  <cite>world az..</cite> e vedrete comparire immediatamente il risultato.
Selezionate <cite>World_Azimuthal_Equidistant</cite>  e fate click su <span class="guilabel">OK</span>.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">La Proiezione Mondiale Equdistante Azimutale misura 90 gradi dall&#8217;origine. Qui, essendo l&#8217;origine a 0 gradi di longitudine, saranno convertiti soltanto i valori compresi tra +/- 90 gradi di longitudine.</p>
</div>
<img alt="../_images/923.png" class="align-center" src="../_images/923.png" />
<ol class="arabic simple" start="10">
<li><p class="first">Tornate nella finestra di dialogo <span class="guilabel">Salva i vettori come ...</span>  e spuntate la casella <span class="guilabel">Aggiungi il file salvato sulla mappa</span> quindi fate click su  <cite>OK</cite>.</p>
</li>
</ol>
<img alt="../_images/1022.png" class="align-center" src="../_images/1022.png" />
<ol class="arabic simple" start="11">
<li><p class="first">Adesso ripetete l&#8217;operazione di ri-proiezione per il file <code class="docutils literal"><span class="pre">ne_10m_rivers_lake_centerlines</span></code>  e salvate il nuovo layer di laghi e fiumi con il nome di <code class="docutils literal"><span class="pre">rivers_lake_reprojected.shp</span></code>.</p>
</li>
</ol>
<img alt="../_images/1127.png" class="align-center" src="../_images/1127.png" />
<ol class="arabic simple" start="12">
<li><p class="first">Adesso avete 4 layer nel vostro:guilabel:<cite>Pannello dei Layer</cite>. Deselezionate i layer originali per vedere soltanto i layer sui quali sono state effettuate le riproiezioni. I layer riproiettati sono ancora rappresentati nei CRS di tipo Geografico per via delle impostazioni di default. Vediamo di annullarle. Facciamo click sul tasto <span class="guilabel">Stato del SR</span>  in basso a destra. Questa finestra può essere raggiunta anche da menu <span class="menuselection">Progetto ‣ Proprietà del Progetto</span>.</p>
</li>
</ol>
<img alt="../_images/1224.png" class="align-center" src="../_images/1224.png" />
<ol class="arabic simple" start="13">
<li><p class="first">Nella scheda Sistema di Riferimento (SR) della finestra di dialogo <span class="guilabel">Proprietà del progetto</span>  disattivate la casella <span class="guilabel">Abilita la riproiezione al volo</span>. Click su <span class="guilabel">OK</span>.</p>
</li>
</ol>
<img alt="../_images/1322.png" class="align-center" src="../_images/1322.png" />
<ol class="arabic simple" start="14">
<li><p class="first">Torniamo adesso nella finestra principale di QGIS, click su uno dei layer riproiettati e click su &#8221; <span class="guilabel">Zoom all&#8217;estensione del Layer</span>.</p>
</li>
</ol>
<img alt="../_images/1421.png" class="align-center" src="../_images/1421.png" />
<ol class="arabic simple" start="15">
<li><p class="first">Adesso vedremo finalmente  nostri dati nel Sistema di Riferimento che abbiamo scelto per i nostri layer. Adesso dobbiamo creare dei buffer per entrambi i dataset. Click su <span class="menuselection">Vettore ‣ Strumenti di Geoprocessing ‣ Buffer</span>.</p>
</li>
</ol>
<img alt="../_images/1520.png" class="align-center" src="../_images/1520.png" />
<ol class="arabic simple" start="16">
<li><p class="first">Nello strumento Buffer scegliete come file di input <code class="docutils literal"><span class="pre">populated_places_reprojected</span></code> . Inserite una distanza di buffer pari a <cite>10000</cite>. Notate che vogliamo un buffer di 10 chilometri e, considerato che le unità del sistema di riferimento sono i metri, dobbiamo inserire 10.000. Inserite come nome del file in uscita <code class="docutils literal"><span class="pre">populated_places_buffer.shp</span></code>. E fate click su <span class="guilabel">OK</span>.</p>
</li>
</ol>
<img alt="../_images/1618.png" class="align-center" src="../_images/1618.png" />
<ol class="arabic simple" start="17">
<li><p class="first">Una volta che il processo di buffering è finito, fate click su  <span class="guilabel">Yes</span> quando vi verrà chiesto se volete aggiungere il nuovo vettore alla TOC.</p>
</li>
</ol>
<img alt="../_images/1717.png" class="align-center" src="../_images/1717.png" />
<ol class="arabic simple" start="18">
<li><p class="first">Ripetete lo stesso processo di buffer per il file <code class="docutils literal"><span class="pre">rivers_lake_reprojected</span></code>  e create un file di output che chiameremo <code class="docutils literal"><span class="pre">rivers_lake_buffer.shp</span></code>.</p>
</li>
</ol>
<img alt="../_images/1817.png" class="align-center" src="../_images/1817.png" />
<ol class="arabic simple" start="19">
<li><p class="first">Il problema è che il nuovo layer <code class="docutils literal"><span class="pre">rivers_lake_buffer</span></code>  contiene geometria che riguardano tanto i fiumi quanto i laghi. La nostra ricerca è interessata esclusivamente alle geometrie dei fiumi, Allora facciamo ricorso ad un&#8217;interrogazione che ci permetta di selezionare esclusivamente le geometrie dei fiumi. Click con il tasto destro su <code class="docutils literal"><span class="pre">rivers_lake_buffer</span></code>  e selezioniamo <span class="guilabel">Apri tabella attributi</span>.</p>
</li>
</ol>
<img alt="../_images/1915.png" class="align-center" src="../_images/1915.png" />
<ol class="arabic simple" start="20">
<li><p class="first">Come potete notare gli attributi della colonna &#8220;featurecla&#8221; contengono informazioni che possiamo usare per separare le geometrie dei fiumi da quelle dei laghi. Fate click sul tasto <cite>Seleziona elementi usando un espressione</cite>.</p>
</li>
</ol>
<img alt="../_images/2011.png" class="align-center" src="../_images/2011.png" />
<ol class="arabic simple" start="21">
<li><p class="first">Inserite l&#8217;espressione  <cite>&#8220;featurecla&#8221; = &#8220;River&#8221;</cite>  fate click su <span class="guilabel">Seleziona</span>  e infine click su <span class="guilabel">Chiudi</span> per tornare alla finestra principale di QGIS.</p>
</li>
</ol>
<img alt="../_images/2116.png" class="align-center" src="../_images/2116.png" />
<ol class="arabic simple" start="22">
<li><p class="first">Ora siamo pronti per realizzare l&#8217;interrogazione spaziale. Dovete aver attivato il Plugin <cite>Interrogazione spaziale</cite> per utilizzare queste funzionalità. Vedetevi <code class="xref doc docutils literal"><span class="pre">Usare</span> <span class="pre">i</span> <span class="pre">plugin</span></code> per maggiori dettagli. Quando il plugin è attivo fate click su <span class="menuselection">Vettore ‣ Interrogazione Spaziale ‣ Interrogazione Spaziale</span>.</p>
</li>
</ol>
<img alt="../_images/2215.png" class="align-center" src="../_images/2215.png" />
<ol class="arabic simple" start="23">
<li><p class="first">A noi interessa selezionare con la nostra interrogazione tutte le geometrie bufferizzate delle città che intersecano le linee bufferizzate dei fiumi. Assicuratevi che la casella vicino alla dicitura &#8220;geometrie selezionate&#8221; sia spuntata e indichi il numero dei fiumi selezionati. Questo ci assicura che la nostra interrogazione interesserà esclusivamente le geometrie dei fiumi che abbiamo precedentemente selezionato. Fate click su <span class="guilabel">Apply</span>.</p>
</li>
</ol>
<img alt="../_images/2313.png" class="align-center" src="../_images/2313.png" />
<ol class="arabic simple" start="24">
<li><p class="first">Una volta che la nostra interrogazione è completa vedrete aggiungersi alla finestra di dialogo una nuova scheda chiamata <span class="guilabel">Oggetti Selezionati</span>.  Fate click sul pulsante  <span class="guilabel">Crea layer con quello selezionato</span>. Un nuovo layer si aggiungerà al pannello dei layer.  Fate click su  <span class="guilabel">Chiudi</span>.</p>
</li>
</ol>
<img alt="../_images/2413.png" class="align-center" src="../_images/2413.png" />
<ol class="arabic simple" start="25">
<li><p class="first">Usate lo strumento ingrandisci (zoom in) in alcune aree per verificare i risultati. Noterete che il nuovo layer contiene solo le geometrie delle città che intersecano il buffer dei fiumi.</p>
</li>
</ol>
<img alt="../_images/2511.png" class="align-center" src="../_images/2511.png" />
<ol class="arabic simple" start="26">
<li><p class="first">Dobbiamo sempre verificare che i nostri risultati siano validi. Un modo per verificare il risultato è esportare questo layer come un file KML e caricarlo in Google Earth. Così potrete vedere se le aree che abbiamo identificato sono realmente dentro i dieci chilometri dal fiume. Tasto destro del mouse sul layer e fate click su <span class="guilabel">Salva con nome</span>.</p>
</li>
</ol>
<img alt="../_images/2610.png" class="align-center" src="../_images/2610.png" />
<ol class="arabic simple" start="27">
<li><p class="first">ella finestra <span class="guilabel">Salva i vettori come...</span>,scegliete <cite>WGS84</cite> come SR. Questo perché il formato KML vuole che le coordinate siano in questo specifico sistema di riferimento. Chiamate il vostro file KML <code class="docutils literal"><span class="pre">cities_near_river.kml</span></code>.</p>
</li>
</ol>
<img alt="../_images/2710.png" class="align-center" src="../_images/2710.png" />
<ol class="arabic simple" start="28">
<li><p class="first">Aprite Google Earth e verificate che le città rappresentate con questi buffer siano effettivamente vicine ai fiumi.</p>
</li>
</ol>
<img alt="../_images/287.png" class="align-center" src="../_images/287.png" />
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Ujaval Gandhi.<br/>
      Ultimo aggiornamento Mar 10, 2019.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/performing_spatial_queries.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>