<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Встановлення зв’язків між таблицями &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Встановлення просторових сполучень" href="performing_spatial_joins.html" />
    <link rel="prev" title="Оцифровування картографічних даних" href="digitizing_basics.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Вступ</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Створення мапи</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Робота з атрибутами</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Імпортування електронних таблиць або CSV-файлів</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Використання додатків</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Пошук та завантаження даних OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Основи векторного моделювання</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Обчислення довжини ліній та статистики</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Основи растрового моделювання та аналізу</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Зшивання та обрізання растрових мозаїк</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Робота з даними рельєфу</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Робота з даними WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Робота з проекціями</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Геоприв’язування топографічних листів та сканованих мап</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Прив’язування аерофотознімків</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Оцифровування картографічних даних</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Встановлення зв’язків між таблицями</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Встановлення просторових сполучень</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Аналіз кількості точок всередині багатокутників</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Створення тепломап</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Виконання просторових запитів</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Аналіз найближчого сусідства</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Вибірка растрових даних із використанням точок або багатокутників</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Інтерполяція точкових даних</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/automating_map_creation.html">Automating Map Creation with Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Використання QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Підрахунок кількості вершин у шарі</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Відкривання файлів BIL, BIP або BSQ у QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Перші кроки в програмуванні на Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Створення додатку на Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Використання користувальницьких виразів функцій Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Запуск та планування обробки завдань QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Пошук сусідніх багатокутників у шарі</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Встановлення зв’язків між таблицями (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Створення Basemaps з QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Навчальні матеріали з QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Джерела даних</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="digitizing_basics.html" title="Previous Chapter: Оцифровування картографічних даних"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Оцифровування ка...</span>
    </a>
  </li>
  <li>
    <a href="performing_spatial_joins.html" title="Next Chapter: Встановлення просторових сполучень"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Встановлення про... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="performing-table-joins">
<h1>Встановлення зв’язків між таблицями<a class="headerlink" href="#performing-table-joins" title="Постійне посилання на цей заголовок">¶</a></h1>
<p>Not every dataset you want to use comes as a shapefile, or in a spatial format. Often the data would come as a table or a spreadsheet and you would need to link it with your existing spatial data for use in your analysis. This operation is known as a <cite>Table Join</cite> and this tutorial will cover how to carry out table joins in QGIS.</p>
<div class="section" id="overview-of-the-task">
<h2>Огляд завдання<a class="headerlink" href="#overview-of-the-task" title="Постійне посилання на цей заголовок">¶</a></h2>
<p>We will use a shapefile of census tracts for California and population data table from US Census Bureau to create a population map for california.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Додаткові навички<a class="headerlink" href="#other-skills-you-will-learn" title="Постійне посилання на цей заголовок">¶</a></h3>
<ul class="simple">
<li>Creating <cite>.csvt</cite> files to indicate column data types in a CSV file.</li>
<li>Loading CSV files that do not contain any geometry in QGIS.</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Отримання даних<a class="headerlink" href="#get-the-data" title="Постійне посилання на цей заголовок">¶</a></h2>
<p><a class="reference external" href="http://www.census.gov/geo/maps-data/data/tiger.html">US Census Bureau</a> has
various spatial extracts from the MAF/TIGER database. You can query and
download census tracts shapefile for California. Download <a class="reference external" href="http://www2.census.gov/geo/tiger/TIGER2013/TRACT/tl_2013_06_tract.zip">Census Tracts for
California</a> file.</p>
<p><a class="reference external" href="http://factfinder2.census.gov/faces/nav/jsf/pages/searchresults.xhtml?refresh=t">Americal FactFinder</a>
is a repository of all census data for the US. You can use <cite>Advanced Search</cite> and
query for the <cite>Topic - Total Population</cite> and
<cite>Geographies - All Census Tracts in California</cite> to create a custom CSV and
download it. This tutorial uses <cite>Total Population 2010 Census Summary File 1</cite>
data.</p>
<p>Для зручності, ви можете безпосередньо завантажити копію обох наборів даних за допомогою наведених нижче посилань:</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/tl_2013_06_tract.zip">tl_2013_06_tract.zip</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ca_tracts_pop.csv">ca_tracts_pop.csv</a></p>
<p>Джерело даних <a class="reference internal" href="credits.html#tiger" id="id1">[TIGER]</a> <a class="reference internal" href="credits.html#uscensus" id="id2">[USCENSUS]</a></p>
</div>
<div class="section" id="procedure">
<h2>Виконання<a class="headerlink" href="#procedure" title="Постійне посилання на цей заголовок">¶</a></h2>
<ol class="arabic simple">
<li>We will first load the census tracts shapefile. Go to <span class="menuselection">Layer
‣ Add Vector Layer</span>.</li>
</ol>
<img alt="../_images/1127.png" class="align-center" src="../_images/1127.png" />
<ol class="arabic simple" start="2">
<li>Browse to the downloaded zip file <code class="docutils literal"><span class="pre">tl_2013_06_tract.zip</span></code> and select it. QGIS
can open zip files directly so no need to uncompress it first.</li>
</ol>
<img alt="../_images/280.png" class="align-center" src="../_images/280.png" />
<ol class="arabic simple" start="3">
<li>Select the <code class="docutils literal"><span class="pre">tl_2013_06_tract.shp</span></code> layer and click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/347.png" class="align-center" src="../_images/347.png" />
<ol class="arabic simple" start="4">
<li>You will see the census tracts loaded into QGIS.</li>
</ol>
<img alt="../_images/426.png" class="align-center" src="../_images/426.png" />
<ol class="arabic simple" start="5">
<li>Right-click on the layer and select <span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/527.png" class="align-center" src="../_images/527.png" />
<ol class="arabic simple" start="6">
<li>Examine the attributes of the tracts shapefile. To join a table with this shapefile, we need a unique and common attribute for each feature. In this case, the <strong>GEOID</strong> field is a unique identifier for each tract and can be used to <cite>link</cite> this shapefile with any other table containing the same ID.</li>
</ol>
<img alt="../_images/625.png" class="align-center" src="../_images/625.png" />
<ol class="arabic simple" start="7">
<li>Open the CSV file <code class="docutils literal"><span class="pre">ca_tracts_pop.csv</span></code> in a text editor. You will notice that each row of the file contains information about a tract along with the unique identifier we saw in the previous step. Note that this field is called <strong>GEO.id2</strong> in the CSV. You will also note that the <strong>D001</strong> column has population value for each of the census tract.</li>
</ol>
<img alt="../_images/725.png" class="align-center" src="../_images/725.png" />
<ol class="arabic simple" start="8">
<li>We could import this csv file without any further action and it would be
imported. But, the default type of each column would be a <em>String</em> (text).
That is ok except for the <cite>D001</cite> field which contains numbers for the
population. Having those imported as text would not allow us to run any
mathematical operations on this column. To tell QGIS to import the field as
a number, we need to create a <cite>sidecar</cite> file with a <cite>.csvt</cite> extension. This
file will have only 1 row specifying data types for each column. Save this
file as <code class="docutils literal"><span class="pre">ca_tracts_pop.csvt</span></code> in the same directory as the original <cite>.csv</cite>
file. You can also <a class="reference external" href="../../downloads/ca_tracts_pop.csvt">download the csvt file from here.</a></li>
</ol>
<img alt="../_images/823.png" class="align-center" src="../_images/823.png" />
<ol class="arabic simple" start="9">
<li>Now we are ready to import the CSV file to QGIS. Go to <span class="menuselection">Layer
‣ Add Delimited Text Layer</span>.</li>
</ol>
<img alt="../_images/922.png" class="align-center" src="../_images/922.png" />
<ol class="arabic simple" start="10">
<li>Browse to the folder containing the CSV file and select it. Make sure you
have selected <span class="guilabel">File format</span> as <span class="guilabel">CSV (comma separated
values)</span>. Since we are importing this as a table, we must specify that our
file contains no geometry. Select the <span class="guilabel">No geometry (attribute
only table)</span> option. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1022.png" class="align-center" src="../_images/1022.png" />
<ol class="arabic simple" start="11">
<li>The CSV will now be imported as a table to QGIS.</li>
</ol>
<img alt="../_images/1128.png" class="align-center" src="../_images/1128.png" />
<ol class="arabic simple" start="12">
<li>Select the <code class="docutils literal"><span class="pre">tl_2013_06_tract</span></code> layer. Right-click on it and select
<span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/1224.png" class="align-center" src="../_images/1224.png" />
<ol class="arabic simple" start="13">
<li>In the <span class="guilabel">Layer Properties</span> dialog, select the <span class="guilabel">Joins</span>
tab. Click on the <cite>+</cite> button at the bottom to create a new table join.</li>
</ol>
<img alt="../_images/1321.png" class="align-center" src="../_images/1321.png" />
<ol class="arabic simple" start="14">
<li>In the <span class="guilabel">Add vector join</span> dialog, select <code class="docutils literal"><span class="pre">ca_tracts_pop</span></code> as the
<span class="guilabel">Join layer</span>. Next we have to select the field with unique ids in
both the shapefile and the CSV. Select <cite>GEO.id2</cite> and <cite>GEOID</cite> as the
<span class="guilabel">Join field</span> and <span class="guilabel">Target field</span> respectively. Click
<span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1421.png" class="align-center" src="../_images/1421.png" />
<ol class="arabic simple" start="15">
<li>Close the <span class="guilabel">Layer Properties</span> dialog and return to the main QGIS
window. At this point, the fields from the CSV file are joined with the
shapefile. Right-click on the <code class="docutils literal"><span class="pre">tl_2013_06_tract</span></code> layer and select
<span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/1520.png" class="align-center" src="../_images/1520.png" />
<ol class="arabic simple" start="16">
<li>You can now see a new set of fields, including
<span class="guilabel">ca_tracts_pop_D001</span> field added to each feature. Now you have
access to the population value of each tract from the CSV file. Close the
attribute table and return to the main QGIS window.</li>
</ol>
<img alt="../_images/1619.png" class="align-center" src="../_images/1619.png" />
<ol class="arabic simple" start="17">
<li>Right-click the <code class="docutils literal"><span class="pre">tl_2013_06_tract</span></code> layer and select <span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/1717.png" class="align-center" src="../_images/1717.png" />
<ol class="arabic simple" start="18">
<li>Select the <span class="guilabel">Style</span> tab. Select the <span class="guilabel">Graduated</span> from the
drop-down menu. As we are looking to create a population map, we want to
assign different color to each census tract feature based on the population
count. Select <span class="guilabel">ca_tracts_pop_D001</span> as the <span class="guilabel">Column</span>.
Select a color ramp of your liking from the <span class="guilabel">Color ramp</span>
drop-down. In the <span class="guilabel">Mode</span>, select <span class="guilabel">Quantile (Equal
Count)</span>. Next click <span class="guilabel">Classify</span>. You will see a different color
assigned to certain population ranges. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1818.png" class="align-center" src="../_images/1818.png" />
<ol class="arabic simple" start="19">
<li>You will now see a nice visualization of the census tracts as styled using
population values. Use the <span class="guilabel">Zoom in</span> tool to select a smaller
area from the layer.</li>
</ol>
<img alt="../_images/1915.png" class="align-center" src="../_images/1915.png" />
<ol class="arabic simple" start="20">
<li>You have a detailed and accurate population map of California. You can use
the same technique to create maps based on variety of census data.</li>
</ol>
<img alt="../_images/2012.png" class="align-center" src="../_images/2012.png" />
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Ujaval Gandhi.<br/>
      Востаннє оновлено Feb 25, 2019.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/performing_table_joins.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>