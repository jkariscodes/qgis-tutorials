Georeferencing Aerial Imagery (QGIS3)
=====================================
In the tutorial :doc:`georeferencing_basics` we covered the basic process of georeferencing in QGIS. That method involved reading the coordinates from your scanned map and entering them manually as control points. Many times though you may not have the coordinates printed on your map, or you are trying to georeference an image. In that case, you can use another georeferenced data-source as your input. In this tutorial, you will learn how to use existing open data sources in your georeferencing process.

Overview of the task
--------------------

We will georeference high resolution balloon-imagery using reference coordinates from OpenStreetMap. 

Other skills you will learn
^^^^^^^^^^^^^^^^^^^^^^^^^^^
- Downloading super high-resolution public domain imagery.
- Using XYZ Tile Layers as basemap.
- Using the OSM Place Search plugin in QGIS.
- Setting a custom no-data value for a layer.

Get the data
------------

In this tutorial, we will be using kite and balloon imagery collected by `The Public Laboratory <http://publiclaboratory.org/archive>`_. They make the georeferenced versions of the images also available, but we will download a non-georeferenced JPG image and go through the process of georeferencing it in QGIS.
 
Download the JPG image of `Washington Square Park, New York <http:// publiclaboratory.org/map/washington-square-park-new-york-new-york/2012-10-01>`_. You can right-click the JPG button and choose :guilabel:`Save link as...`.
 
For convenience, you may directly download a copy of the dataset from the link below:
 
`newyorkcity-washingtonsquarepark.jpg <http://www.qgistutorials.com/downloads/newyorkcity-washingtonsquarepark.jpg>`_

Procedure
---------

1. We will use a basemap from OpenStreetMap to capture the coordinates for georeferencing. QGIS3 comes with  built-in support for tile layers. These are commonly known as 'XYZ' layers since they are made using individual map tiles for each zoom level (z) on a x,y coordinate grid. You can find the ``OpenStreetMap`` layer under :guilabel:`XYZ Tiles` in the :guilabel:`Browser Panel`. Drag the layer to the main canvas. Once loaded, note the Coordinate Reference System (CRS) for this layer in the bottom-right corder. It is set as ``EPSG 3857 Pseudo Mercator``. This is important because the coordinates we infer from this layer during georeferencing will be in this CRS.

  .. image:: /static/3/advanced_georeferencing/images/1.png
     :align: center

.. note::

  See `this page <https://www.spatialbias.com/2018/02/qgis-3.0-xyz-tile-layers/>`_ for more details on XYZ layers and how to add other basemaps in QGIS.
  
2. The image we are georeferencing is for ``Washington Square Park, New York``. You can zoom/pan try to locate this park in the map. But that is cumbersome and may not be practical. An easier way is to use the OpenStreetMap (OSM) Place Search plugin to search for the exact location. Install the ``OSM Place Search`` plugin from :menuselection:`Plugins --> Manage and install plugins --> All`. If you do not see this plugin in the search results, make sure you have checked :guilabel:`Also show experimental plugins` under :guilabel:`Settings`. See :doc:`../using_plugins` for more information on using plugins in QGIS.

  .. image:: /static/3/advanced_georeferencing/images/2.png
     :align: center

3. Once the plugin is installed, you will see a new panel called :guilabel:`OSM Place Search...`. Search for ``Washington Square Park`` in the :guilabel:`Name contains..` box and click :guilabel:`->`. You will see the matching place names appear in the results panel. Select the correct result and click the :guilabel:`Zoom` button.

  .. image:: /static/3/advanced_georeferencing/images/3.png
     :align: center

4. You will see the map that is familiar and contains the landmarks that we can identify from the image. You may close the :guilabel:`OSM Place Search` panel now. If you need it again, you can open it from :menuselection:`View --> Panels --> OSM Place Search`.

  .. image:: /static/3/adv