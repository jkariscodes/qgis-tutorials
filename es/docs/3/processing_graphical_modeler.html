<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Automatizar Flujos de Trabajo Complejos usando el Modelador de Procesos (QGIS3) &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../../index.html" />
    <link rel="next" title="Automatización de la creación de mapas con el Atlas de diseñador de impresiones (QGIS3)" href="automating_map_creation.html" />
    <link rel="prev" title="Procesamiento por Lotes usando el Marco de Procesamiento (QGIS3)" href="batch_processing.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><img src="../../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Haciendo un Mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Trabajando con atributos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importando Hojas de Cálculo o archivos CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Estilo Básico Vectorial (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calculating Line Lengths and Statistics (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Basic Raster Styling and Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mosaicar y Recortar Ráster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_terrain.html">Trabajar con datos de terreno</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_wms.html">Trabajando con datos WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_projections.html">Trabajando con proyecciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferencing Topo Sheets and Scanned Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenciar Imágenes Aéreas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitizing_basics.html">Digitalizar Datos del Mapa</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Performing Table Joins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Performing Spatial Joins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animar Datos de Series de Tiempo (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interpolating_point_data.html">Interpolating Point Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Procesamiento por Lotes usando el Marco de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Automatizar Flujos de Trabajo Complejos usando el Modelador de Procesos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatización de la creación de mapas con el Atlas de diseñador de impresiones  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Basic Network Visualization and Routing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_qgis_browser.html">Usando QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open_bil_bip_bsq_files.html">Abrir archivos BIL, BIP o BSQ en QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Iniciándote con la Programación Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Construyendo un Complemento Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Usando Funciones de Expresión Python Personalizadas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Correr y Programar Trabajos de Procesamiento QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performing_table_joins_pyqgis.html">Realización de uniones de tabla (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_mapping_with_qgis2web.html">Mapeo web con QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creando Mapas Base con QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_plugins.html">Uso de complementos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Buscando y descargando datos de OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Recursos de aprendizaje QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Créditos de los Conjuntos de Datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="batch_processing.html" title="Previous Chapter: Procesamiento por Lotes usando el Marco de Procesamiento (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Procesamiento...</span>
    </a>
  </li>
  <li>
    <a href="automating_map_creation.html" title="Next Chapter: Automatización de la creación de mapas con el Atlas de diseñador de impresiones (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Automatizació... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Interested in learning QGIS? I offer certification courses for beginner, intermediate and advanced users. Visit <a href="https://spatialthoughts.com/courses" target="_blank">spatialthoughts.com</a></p> to continue your QGIS learning journey.

<hr>
<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<h4>Subscribe to my mailing list</h4>
<form action="https://spatialthoughts.us20.list-manage.com/subscribe/post?u=59d493847a7c7c2dbf12b21e6&amp;id=8fb09ab55c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_59d493847a7c7c2dbf12b21e6_8fb09ab55c" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="automating-complex-workflows-using-processing-modeler-qgis3">
<h1>Automatizar Flujos de Trabajo Complejos usando el Modelador de Procesos (QGIS3)<a class="headerlink" href="#automating-complex-workflows-using-processing-modeler-qgis3" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Los Flujos de Trabajo SIG típicamente involucran varios pasos - con cada paso generando una salida intermedia que es usada por el siguiente paso. Si se cambia los datos de entrada o se quiere retocar un parámetro, necesitará correr manualmente de nuevo por todo el proceso. Afortunadamente, QGIS tiene un modeladodor gráfico incorporado que puede ayudarle a definir su flujo de trabajo y ejecutarlo en una sola llamada. Puede también ejecutar esos flujos de trabajo por lote sobre un gran número de entradas.</p>
<div class="section" id="overview-of-the-task">
<h2>Vista general de la tarea<a class="headerlink" href="#overview-of-the-task" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Tomaremos una capa de puntos de incidntes de piratería marítima y crearemos un modelo de proceso para producir un mapa de densidad agregándolos sobre una cuadrícula global hexagonal.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Otras habilidades que aprenderá<a class="headerlink" href="#other-skills-you-will-learn" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p class="first">Usar una proyección global de área igual y establecer el SRC del Proyecto</p>
</li>
<li><p class="first">Aplicar una simbología Graduada a una capa polígono</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Obtener los datos<a class="headerlink" href="#get-the-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El <a class="reference external" href="https://msi.nga.mil/NGAPortal/MSI.portal">portal de Información de Seguridad Marítima</a> de la National Geospatial-Intelligence Agency provee un archivo shape de todos los incidentes de priatería marítima en la forma de  <a class="reference external" href="https://msi.nga.mil/Piracy">Mensajes de Actividad Anti-barcos</a>. Descargue la versión <a class="reference external" href="https://msi.nga.mil/api/publications/download?key=16920958/SFH00000/ASAM_shp.zip&amp;type=download">archivo Arc Shape</a> de la base de datos.</p>
<p><a class="reference external" href="http://naturalearthdata.com">Natural Earth</a> tiene varias capas vectoriales globales. Descargue los <a class="reference external" href="https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/physical/ne_10m_land.zip">Vectores Físicos 10m - Tierra</a> que contienen los polígonos Tierra (Land).</p>
<p>Para su comodidad, puede descargar directamente una copia de las capas mencionadas previamente de aquí abajo:</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ASAM_shp.zip">ASAM_shp.zip</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ne_10m_land.zip">ne_10m_land.zip</a></p>
<p>Fuente de Datos: <a class="reference internal" href="../credits.html#nga-msi" id="id1">[NGA_MSI]</a> <a class="reference internal" href="../credits.html#naturalearth" id="id2">[NATURALEARTH]</a></p>
</div>
<div class="section" id="procedure">
<h2>Procedimiento<a class="headerlink" href="#procedure" title="Enlazar permanentemente con este título">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">En el panel QGIS Explorador, ubique el directorio donde guardó sus datos descargados. Expanda <code class="docutils literal"><span class="pre">ne_10m_land.zip</span></code> y seleccione la capa <code class="docutils literal"><span class="pre">ne_10m_land.shp</span></code>. Arrastre la capa a la pantalla. A continuación, localice el archivo <code class="docutils literal"><span class="pre">ASAM_shp.zip</span></code>. Expándala y seleccione la capa <code class="docutils literal"><span class="pre">asam_data_download/ASAM_events.shp</span></code> y arrástrela a la pantalla.</p>
</li>
</ol>
<img alt="../../_images/1106.png" class="align-center" src="../../_images/1106.png" />
<ol class="arabic simple" start="2">
<li><p class="first">La capa <code class="docutils literal"><span class="pre">ASAM_events.shp</span></code> no tiene información de proyección asociada, por lo que se le pedirá elegir un SRC en el <span class="guilabel">Selector del Sistema de Referencia de Coordenadas</span>. Aquí, los puntos están en coordenadas Latitud y Longitud, así que seleccione el SRC <code class="docutils literal"><span class="pre">WGS</span> <span class="pre">84</span></code> y clic en <span class="guilabel">Aceptar</span>.</p>
</li>
</ol>
<img alt="../../_images/259.png" class="align-center" src="../../_images/259.png" />
<ol class="arabic simple" start="3">
<li><p class="first">Una vez la capa está cargada, puede ver los puntos individuales que representan incidentes de ubicaciones de piratería. Comencemos construyendo nuestro modelo de Proceso para procesar estas capas. Vaya a <span class="menuselection">Procesos ‣ Modelador Gráfico...</span>.</p>
</li>
</ol>
<img alt="../../_images/337.png" class="align-center" src="../../_images/337.png" />
<ol class="arabic simple" start="4">
<li><p class="first">En el diálogo <span class="guilabel">Modelador de Procesos</span>, ubique el panel <span class="guilabel">Propiedades del Modelo</span>. Ingrese <code class="docutils literal"><span class="pre">piracy</span> <span class="pre">hexbin</span></code> para el <span class="guilabel">Nombre</span> del modelo y <code class="docutils literal"><span class="pre">proyectos</span></code> como <span class="guilabel">Grupos</span>. Clic en el botón <span class="guilabel">Guardar</span>.</p>
</li>
</ol>
<img alt="../../_images/422.png" class="align-center" src="../../_images/422.png" />
<ol class="arabic simple" start="5">
<li><p class="first">Guarde el modelo como <code class="docutils literal"><span class="pre">piracy_hexbin</span></code>.</p>
</li>
</ol>
<img alt="../../_images/522.png" class="align-center" src="../../_images/522.png" />
<ol class="arabic simple" start="6">
<li>Now we can start building a graphical model of our processing pipeline.  The <span class="guilabel">Processing modeler</span> dialog contains a left-hand panel and a main canvas. On he left-hand panel, locate the <span class="guilabel">Inputs</span> panel listing various types of input data types. Scroll down and select the <span class="guilabel">+ Vector Layer</span> input. Drag it to the canvas.</li>
</ol>
<img alt="../../_images/622.png" class="align-center" src="../../_images/622.png" />
<ol class="arabic simple" start="7">
<li>Enter <code class="docutils literal"><span class="pre">Input</span> <span class="pre">Points</span></code> as the <span class="guilabel">Parameter name</span> and <code class="docutils literal"><span class="pre">Point</span></code> as the <span class="guilabel">Geometry type</span>. This input represents the piracy incidents point layer.</li>
</ol>
<img alt="../../_images/721.png" class="align-center" src="../../_images/721.png" />
<ol class="arabic simple" start="8">
<li>Next, drag another <span class="guilabel">+ Vector Layer</span> input to the canvas. Enter <code class="docutils literal"><span class="pre">Base</span> <span class="pre">Layer</span></code> as the <span class="guilabel">Parameter name</span> and <code class="docutils literal"><span class="pre">Polygon</span></code> as the <span class="guilabel">Geometry type</span>. This input represents the natural earth global land layer.</li>
</ol>
<img alt="../../_images/821.png" class="align-center" src="../../_images/821.png" />
<ol class="arabic simple" start="9">
<li>As we are generating a global hexagonal grid, we can ask the user to supply us the grid size as an input instead of hard-coding it as part of our model. This way, the user can quickly experiment with different grid sizes without changing the model at all. select a <span class="guilabel">+ Number</span> input and drag it to the canvas. Enter <code class="docutils literal"><span class="pre">Grid</span> <span class="pre">Size</span></code> as the <span class="guilabel">Parameter name</span> and click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../../_images/921.png" class="align-center" src="../../_images/921.png" />
<ol class="arabic simple" start="10">
<li>Now that we have our user inputs defined, we are ready to add processing steps. All of the processing algorithms are available to you under the <span class="guilabel">Algorithms</span> tab. The first step in our pipeline will be to reproject the base layer to the Project CRS.  Search for <code class="docutils literal"><span class="pre">Reproject</span> <span class="pre">layer</span></code> algorithm and drag it to the canvas.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">The necessity of this reprojection step will become clear shortly. The grid generation algorithm requires us to specify the extent of the grid in the unit of the Project CRS. We can supply this reprojected layer to compute this extent.</p>
</div>
<img alt="../../_images/1021.png" class="align-center" src="../../_images/1021.png" />
<ol class="arabic simple" start="11">
<li>In the <span class="guilabel">Reproject layer</span> dialog, select <code class="docutils literal"><span class="pre">Base</span> <span class="pre">Layer</span></code> as the <span class="guilabel">Input layer</span>. Check the <span class="guilabel">Use project CRS</span> as the <span class="guilabel">Target CRS</span>. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../../_images/1124.png" class="align-center" src="../../_images/1124.png" />
<ol class="arabic simple" start="12">
<li>In the <span class="guilabel">Processing Modeler</span> canvas, you will notice a connection appear between the <span class="guilabel">+ Base Layer</span> input and the <span class="guilabel">Reproject layer</span> algorithm. This connection indicates the flow of our processing pipeline. Next step is to create a hexagonal grid. Search for the <code class="docutils literal"><span class="pre">Create</span> <span class="pre">grid</span></code> algorithm and drag it to the canvas.</li>
</ol>
<img alt="../../_images/1221.png" class="align-center" src="../../_images/1221.png" />
<ol class="arabic simple" start="13">
<li>In the <span class="guilabel">Generate grid</span> dialog, choose <code class="docutils literal"><span class="pre">Hexagon</span> <span class="pre">(polygon)</span></code> as the <span class="guilabel">Grid type</span>. Select <code class="docutils literal"><span class="pre">Extent</span> <span class="pre">of</span> <span class="pre">'Reprojected'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Reproject</span> <span class="pre">Layer'</span></code> as the <span class="guilabel">Grid extent</span>. Click the <span class="guilabel">123</span> button under the <span class="guilabel">Horizonal spacing</span> label and choose <span class="guilabel">Model input</span>.</li>
</ol>
<img alt="../../_images/1320.png" class="align-center" src="../../_images/1320.png" />
<ol class="arabic simple" start="14">
<li>Select <code class="docutils literal"><span class="pre">Grid</span> <span class="pre">Size</span></code> input for <span class="guilabel">Using model input</span>. Repeat the same process for <span class="guilabel">Vertical Spacing</span>. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../../_images/1420.png" class="align-center" src="../../_images/1420.png" />
<ol class="arabic simple" start="15">
<li>At this point, we have a global hexagonal grid. The grid spans the full extent of the base layer, including land areas and places where there are no points. Let&#8217;s filter out those grid polygons where there are no input points. Search for <code class="docutils literal"><span class="pre">Extract</span> <span class="pre">by</span> <span class="pre">location</span></code> algorithm and drag it to the canvas.</li>
</ol>
<img alt="../../_images/1519.png" class="align-center" src="../../_images/1519.png" />
<ol class="arabic simple" start="16">
<li>For <span class="guilabel">Extract features from</span>, select <code class="docutils literal"><span class="pre">'Grid'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Generate</span> <span class="pre">Grid'</span></code>, <span class="guilabel">Where the features (geometric predicate)</span> as <code class="docutils literal"><span class="pre">Intersect</span></code> and <span class="guilabel">By compating to the features from</span> as <code class="docutils literal"><span class="pre">Input</span> <span class="pre">points</span></code>. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../../_images/1617.png" class="align-center" src="../../_images/1617.png" />
<ol class="arabic simple" start="17">
<li>Now we have only those grid polygons that contain some input points. To aggregate these points, we will use <code class="docutils literal"><span class="pre">Count</span> <span class="pre">points</span> <span class="pre">in</span> <span class="pre">polygon</span></code> algorithm. Search and drag it to the canvas.</li>
</ol>
<img alt="../../_images/1718.png" class="align-center" src="../../_images/1718.png" />
<ol class="arabic simple" start="18">
<li>Select <code class="docutils literal"><span class="pre">'Extracted</span> <span class="pre">(location)'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Extract</span> <span class="pre">by</span> <span class="pre">location'</span></code> as the value for <span class="guilabel">Polygons</span>. The <span class="guilabel">Points</span> layer would be <code class="docutils literal"><span class="pre">Input</span> <span class="pre">Points</span></code>. At the bottom, name the <span class="guilabel">Count</span> output layer as <code class="docutils literal"><span class="pre">Aggregated</span></code>. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../../_images/1817.png" class="align-center" src="../../_images/1817.png" />
<ol class="arabic simple" start="19">
<li>The model is now complete. Click the <span class="guilabel">Save</span> button.</li>
</ol>
<img alt="../../_images/1914.png" class="align-center" src="../../_images/1914.png" />
<ol class="arabic simple" start="20">
<li>Switch to the main QGIS window. You can find your newly created model in the <span class="guilabel">Processing Toolbox</span> under <span class="menuselection">Models ‣ projects ‣ piracy_hexbin</span>. Now it is time to run and test the model. As our goal is to aggregate the input points over hexagonal grids, it is important that the grids are generated using a equal-area projection. This will ensure that regardless of the location of the grid, it will cover exactly the same area. Our model doesn&#8217;t explicitely ask for a CRS, but uses whatever CRS is set as the <strong>Project CRS</strong>. Let&#8217;s choose a global equal area projection as the Project CRS. Go to <span class="menuselection">Project ‣ Properties</span>.</li>
</ol>
<img alt="../../_images/2011.png" class="align-center" src="../../_images/2011.png" />
<ol class="arabic simple" start="21">
<li>In the <span class="guilabel">Project Properties</span> dialog, switch to the <span class="guilabel">CRS</span> tab. We will use a global <strong>Mollweide</strong> projection for this exercise which is a equal area projection. Search for <code class="docutils literal"><span class="pre">Mollweide</span></code> in the <span class="guilabel">Filter</span> box and select <code class="docutils literal"><span class="pre">World_Mollweide</span> <span class="pre">EPSG:54009</span></code> as the CRS. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../../_images/2116.png" class="align-center" src="../../_images/2116.png" />
<ol class="arabic simple" start="22">
<li>You will see the layers getting reprojected on-the-fly to the selected CRS. Locate the <code class="docutils literal"><span class="pre">piracy_hexbin</span></code> model in the <span class="guilabel">Processing Toolbox</span> and double-click it.</li>
</ol>
<img alt="../../_images/2214.png" class="align-center" src="../../_images/2214.png" />
<ol class="arabic simple" start="23">
<li>Our <span class="guilabel">Base Layer</span> is the <code class="docutils literal"><span class="pre">ne_10m_land</span></code> and the <span class="guilabel">Input Points</span> layer is <code class="docutils literal"><span class="pre">ASAM_events</span></code>. The <span class="guilabel">Grid Size</span> needs to be specified in the units of the selected CRS. The World_Mollweide CRS unit is meters, so we specify <code class="docutils literal"><span class="pre">100000</span></code> m (100 Kms) as the <span class="guilabel">Grid Size</span>. Click <span class="guilabel">Run</span> to start the processing pipeline. Once the process finishes, click <span class="guilabel">Close</span>.</li>
</ol>
<img alt="../../_images/2312.png" class="align-center" src="../../_images/2312.png" />
<ol class="arabic simple" start="24">
<li>You will see a new layer <code class="docutils literal"><span class="pre">Aggregated</span></code> loaded as the result of the model. As you explore, you will notice the layer contains an attribute called <em>NUMPOINTS</em> containing the number of piracy incidents points contained within that grid feature. Let&#8217;s style this layer to display this information better. Right-click the <code class="docutils literal"><span class="pre">Aggregated</span></code> layer and select <span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../../_images/2410.png" class="align-center" src="../../_images/2410.png" />
<ol class="arabic simple" start="25">
<li>Switch to the <span class="guilabel">Symbology</span> tab. Select <code class="docutils literal"><span class="pre">Graduated</span></code> symbology and <code class="docutils literal"><span class="pre">NUMPOINTS</span></code> as the <span class="guilabel">Column</span>. Click <code class="docutils literal"><span class="pre">Change..</span></code> next to <span class="guilabel">Symbol</span> label.</li>
</ol>
<img alt="../../_images/2510.png" class="align-center" src="../../_images/2510.png" />
<ol class="arabic simple" start="26">
<li>Select <span class="guilabel">Simple fill</span> symbol and check the <span class="guilabel">Transparent Stroke</span> button under <span class="guilabel">Stroke color</span>. This is to make the hexagon edges transparent.</li>
</ol>
<img alt="../../_images/267.png" class="align-center" src="../../_images/267.png" />
<ol class="arabic simple" start="27">
<li>Click the dropdown next to <span class="guilabel">Color ramp</span> and select the <code class="docutils literal"><span class="pre">Viridis</span></code> ramp. Click the dropdown again and select <span class="guilabel">Invert Color Ramp</span> to reverse the order of color.</li>
</ol>
<img alt="../../_images/277.png" class="align-center" src="../../_images/277.png" />
<ol class="arabic simple" start="28">
<li>The Graduated symbology will divide the values in the selected column into distinct classes and assign a different color to each of the classes. Select <code class="docutils literal"><span class="pre">Natural</span> <span class="pre">Breaks</span> <span class="pre">(Jenks)</span></code> as the <span class="guilabel">Mode</span> and click <span class="guilabel">Classify</span> and click <span class="guilabel">OK</span>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">see <a class="reference internal" href="../basic_vector_styling.html"><em>Estilos vectoriales básicos</em></a> for a detailed explanation of different modes.</p>
</div>
<img alt="../../_images/287.png" class="align-center" src="../../_images/287.png" />
<ol class="arabic simple" start="29">
<li>Back in the main QGIS window, turn off the <code class="docutils literal"><span class="pre">ASAM_events</span></code> layer. You will see a nice visualization of piracy hotspots across the globe.</li>
</ol>
<img alt="../../_images/296.png" class="align-center" src="../../_images/296.png" />
<p>Now that you have encoded the full data pipeline in the model, it is easy to reproduce your results. A model also allows you to experiment quickly without manually repeating each intermediate step every time. If your inputs change over time, say an updated database of piracy is released after a few months, you can run your model on that input to generate a similar visualization without having to remember each step.</p>
</div>
</div>





  <div>If you liked tutorials on this site and do check out 
  <a href="http://spatialthoughts.com" target="_blank">spatialthoughts.com</a> for more free resources.
  </div>
  
  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Ujaval Gandhi.<br/>
      Actualizado por última vez en May 20, 2020.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/processing_graphical_modeler.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>