<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Análisis de vecino más cercano &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/making_a_map.html">Haciendo un Mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_attributes.html">Trabajando con atributos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/importing_spreadsheets_csv.html">Importando Hojas de Cálculo o archivos CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/basic_vector_styling.html">Estilo Básico Vectorial (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_line_lengths.html">Calculating Line Lengths and Statistics (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/raster_styling_and_analysis.html">Basic Raster Styling and Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/raster_mosaicing_and_clipping.html">Mosaicar y Recortar Ráster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Trabajar con datos de terreno</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Trabajando con datos WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Trabajando con proyecciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/georeferencing_basics.html">Georeferencing Topo Sheets and Scanned Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/advanced_georeferencing.html">Georeferenciar Imágenes Aéreas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitalizar Datos del Mapa</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_table_joins.html">Performing Table Joins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_spatial_joins.html">Performing Spatial Joins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/animating_time_series.html">Animar Datos de Series de Tiempo (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Procesamiento por Lotes usando el Marco de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Automatizar Flujos de Trabajo Complejos usando el Modelador de Procesos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/automating_map_creation.html">Automatización de la creación de mapas con el Atlas de diseñador de impresiones  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/basic_network_analysis.html">Basic Network Visualization and Routing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Usando QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Abrir archivos BIL, BIP o BSQ en QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/getting_started_with_pyqgis.html">Iniciándote con la Programación Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/building_a_python_plugin.html">Construyendo un Complemento Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/custom_python_functions.html">Usando Funciones de Expresión Python Personalizadas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Correr y Programar Trabajos de Procesamiento QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Realización de uniones de tabla (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Mapeo web con QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Creando Mapas Base con QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Uso de complementos</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Buscando y descargando datos de OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Recursos de aprendizaje QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Créditos de los Conjuntos de Datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Interested in learning QGIS? I offer certification courses for beginner, intermediate and advanced users. Visit <a href="https://spatialthoughts.com/courses" target="_blank">spatialthoughts.com</a></p> to continue your QGIS learning journey.

<hr>
<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<h4>Subscribe to my mailing list</h4>
<form action="https://spatialthoughts.us20.list-manage.com/subscribe/post?u=59d493847a7c7c2dbf12b21e6&amp;id=8fb09ab55c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_59d493847a7c7c2dbf12b21e6_8fb09ab55c" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="nearest-neighbor-analysis">
<h1>Análisis de vecino más cercano<a class="headerlink" href="#nearest-neighbor-analysis" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Este tutorial está ahora obsoleto. Un versión nueva y actualizada está disponible en <a class="reference internal" href="3/nearest_neighbor_analysis.html"><em>Nearest Neighbor Analysis (QGIS3)</em></a></p>
</div>
<p>El SIG es muy útil para analizar la relación espacial entre entidades. Un tipo de análisis es descubrir qué entidades están más cerca de una entidad dada. QGIS tiene una herramienta llamada <strong>Matriz de Distancia</strong> que ayuda en ese análisis. En este tutorial, usaremos 2 conjuntos de datos y descubriremos qué puntos de una capa están más cerca a qué puntos de la segunda capa.</p>
<div class="section" id="overview-of-the-task">
<h2>Vista general de la tarea<a class="headerlink" href="#overview-of-the-task" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Dadas las ubicaciones de todos los sismos significativos, descubrir el centro poblado más cercano para cada ubicación donde ocurrió el sismo.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Otras habilidades que aprenderás<a class="headerlink" href="#other-skills-you-will-learn" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p class="first">Cómo hacer uniones de tabla en QGIS. (Ver <a class="reference internal" href="performing_table_joins.html"><em>Realización de uniones de tabla</em></a> para instrucciones detalladas.)</p>
</li>
<li><p class="first">Usar <span class="guilabel">Constructor de Consulta</span> para mostrar un subconjunto de entidades de una capa.</p>
</li>
<li><p class="first">Usar el complemento MMQGIS para crear líneas de eje para visualizar los vecinos más cercanos.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Obtener los datos<a class="headerlink" href="#get-the-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Usaremos la <a class="reference external" href="http://www.ngdc.noaa.gov/nndc/struts/form?t=101650&amp;s=1&amp;d=1">Base de Datos de Sismos Significativos</a> del National Geophysical Data Center de NOAA como nuestra capa que representa todos los sismos principales. Descargue los <a class="reference external" href="http://www.ngdc.noaa.gov/nndc/struts/results?type_0=Exact&amp;query_0=$ID&amp;t=101650&amp;s=13&amp;d=189&amp;dfn=signif.txt">datos delimitados por tabulación de sismo</a>.</p>
<p>Natural Earth tiene un agradable conjunto de datos de <a class="reference external" href="http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-populated-places/">Centros Poblados</a>. Descargue el <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places_simple.zip">conjunto de datos simple (menos columnas)</a>.</p>
<p>Para su comodidad, puedes descargar directamente una copia de ambos conjuntos de datos desde los enlaces abajo:</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/signif.txt">signif.txt</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ne_10m_populated_places_simple.zip">ne_10m_populated_places_simple.zip</a></p>
<p>Fuentes de Datos: <a class="reference internal" href="credits.html#ngdc" id="id1">[NGDC]</a> <a class="reference internal" href="credits.html#naturalearth" id="id2">[NATURALEARTH]</a></p>
</div>
<div class="section" id="procedure">
<h2>Procedmiento<a class="headerlink" href="#procedure" title="Enlazar permanentemente con este título">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">Abra <span class="menuselection">Capa ‣ Agregar Capa ‣ Agregar Capa de Texto Delimitado</span> y navegue hacia el archivo <code class="docutils literal"><span class="pre">signif.txt</span></code>.</p>
</li>
</ol>
<img alt="../_images/1169.png" class="align-center" src="../_images/1169.png" />
<ol class="arabic simple" start="2">
<li><p class="first">Debido a que este es un <em>archivo delimitado por tabulación</em>, escoja <span class="guilabel">Tab</span> como el <span class="guilabel">Formato de archivo</span>. El <span class="guilabel">campo X</span> y <span class="guilabel">campo Y</span> se llenarían automáticamente. Clic en <span class="guilabel">Aceptar</span>.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Puede que veas algunos mensajes de error cuando QGIS intenta importar el archivo. Estos son errores válidos y algunas filas del archivo no serán importadas. Puedes ignorar los errores para los fines de este tutorial.</p>
</div>
<img alt="../_images/2129.png" class="align-center" src="../_images/2129.png" />
<ol class="arabic simple" start="3">
<li><p class="first">Como el conjunto de datos de sismo tiene coordenadas Latitud/Longitud, será importado con el SRC predeterminado <code class="docutils literal"><span class="pre">EPSG:</span> <span class="pre">4326</span></code>. Verificar que este es el caso en la esquina inferior derecha. Abramos también la capa de Centros Poblados. Vaya a <span class="menuselection">Capa ‣ Agregar Capa ‣ Agregar Capa Vectorial</span>.</p>
</li>
</ol>
<img alt="../_images/369.png" class="align-center" src="../_images/369.png" />
<ol class="arabic simple" start="4">
<li><p class="first">Navegue al archivo descargado <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple.zip</span></code> y clic en <span class="guilabel">Abrir</span>.</p>
</li>
</ol>
<img alt="../_images/449.png" class="align-center" src="../_images/449.png" />
<ol class="arabic simple" start="5">
<li><p class="first">Acérquese por ahí y explore a ambos conjuntos de datos. Capa punto púrpura representa la ubicación de un sismo significativo y cada punto azul representa la ubicación de un centro poblado. Necesitamos una manera de descubrir el punto más cercano de los centros poblados para cada uno de los puntos en la capa de sismo.</p>
</li>
</ol>
<img alt="../_images/549.png" class="align-center" src="../_images/549.png" />
<ol class="arabic simple" start="6">
<li><p class="first">Vaya a <span class="menuselection">Vector ‣ Herramientas de Análisis ‣ Matriz de Distancia</span>.</p>
</li>
</ol>
<img alt="../_images/647.png" class="align-center" src="../_images/647.png" />
<ol class="arabic simple" start="7">
<li><p class="first">Aquí seleccione la capa de sismo <code class="docutils literal"><span class="pre">signif</span></code> como la capa punto Entrada y los centros poblados <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple</span></code> como la capa destino. También necesita seleccionar un campo único desde cada una de estas capas que es como sus resultados serán mostrados. En este análisis, estamos buscando conseguir sólo <code class="docutils literal"><span class="pre">1</span></code> punto más cercano, así que revise <span class="guilabel">Usar sólo los (k) puntos más cercanos del destino</span>, e ingrese <span class="guilabel">1</span>. Dele nombre a su archivo de salida <code class="docutils literal"><span class="pre">matrix.csv</span></code>, y clic en Aceptar. Una vez finalice el procesamiento, clic en <span class="guilabel">Cerrar</span>.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Una cosa fácil para notar es que incluso puede realizar el análisis con sólo 1 capa. Seleccione la misma capa tanto como la Entrada y Destino. El resultado sería el vecino más cercano de la misma capa en vez de una capa diferente como lo hicimos aquí.</p>
</div>
<img alt="../_images/746.png" class="align-center" src="../_images/746.png" />
<ol class="arabic simple" start="8">
<li>Once the processing finishes, click the <span class="guilabel">Close</span> button in the
<span class="guilabel">Distance Matrix</span> dialog. You can now view the <code class="docutils literal"><span class="pre">matrix.csv</span></code> file
in Notepad or any text editor.  QGIS can import CSV files as well, so we
will add it to QGIS and view it there. Go to <span class="menuselection">Layer ‣ Add
Layer ‣ Add Delimited Text Layer...</span>.</li>
</ol>
<img alt="../_images/845.png" class="align-center" src="../_images/845.png" />
<ol class="arabic simple" start="9">
<li>Browse to the newly created <code class="docutils literal"><span class="pre">matrix.csv</span></code> file. Since this file is just
text columns, select <span class="guilabel">No geometry (attribute only table)</span> as the
<span class="guilabel">Geometry definition</span>. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/944.png" class="align-center" src="../_images/944.png" />
<ol class="arabic simple" start="10">
<li>You will see the CSV file loaded as a table. Right-click on the table layer
and select <span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/1043.png" class="align-center" src="../_images/1043.png" />
<ol class="arabic simple" start="11">
<li>Now you will be able to see the content of our results. The
<span class="guilabel">InputID</span> field contains the field name from the Earthquake
layer. The <span class="guilabel">TargetID</span> field contains the name of the feature from
the Populated Places layer that was the closest to the earthquake point.
The <span class="guilabel">Distance</span> field is the distance between the 2 points.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Remember that the <em>distance</em> calculation will be done using the layers&#8217;
Coordinate Reference System. Here the distance will be in <em>decimal degrees</em>
units because our source layer coordinates are in degrees. If you want
distance in meters, reproject the layers before running the tool.</p>
</div>
<img alt="../_images/1170.png" class="align-center" src="../_images/1170.png" />
<ol class="arabic simple" start="12">
<li>This is very close to the result we were looking for. For some users, this
table would be sufficient. However, we can also integrate this results in
our original Earthquake layer using a <strong>Table Join</strong>. Right-click on the
Earthquake layer, and select <span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/1244.png" class="align-center" src="../_images/1244.png" />
<ol class="arabic simple" start="13">
<li>Go to the <span class="guilabel">Joins</span> tab and click on the <span class="guilabel">+</span> button.</li>
</ol>
<img alt="../_images/1441.png" class="align-center" src="../_images/1441.png" />
<ol class="arabic simple" start="14">
<li>We want to join the data from our analysis result to this layer. We need to
select a field from each of the layers that has the same values. Select
<code class="docutils literal"><span class="pre">matrix</span></code> as the <span class="guilabel">Join layer`</span> and <code class="docutils literal"><span class="pre">InputID</span></code> as the
<span class="guilabel">Join field</span>. The <span class="guilabel">Target field</span> would be <code class="docutils literal"><span class="pre">I_D</span></code>.
Leave other options to their default values and click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1441.png" class="align-center" src="../_images/1441.png" />
<ol class="arabic simple" start="15">
<li>You will see the join appear in the <span class="guilabel">Joins</span> tab. Click
<span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1540.png" class="align-center" src="../_images/1540.png" />
<ol class="arabic simple" start="16">
<li>Now open the attribute table of the <code class="docutils literal"><span class="pre">signif</span></code> layer by right-clicking and
selecting <span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/1636.png" class="align-center" src="../_images/1636.png" />
<ol class="arabic simple" start="17">
<li>You will see that for every Earthquake feature, we now have an attribute
which is the nearest neighbor (closest populated place) and the distance to
the nearest neighbor.</li>
</ol>
<img alt="../_images/1733.png" class="align-center" src="../_images/1733.png" />
<ol class="arabic simple" start="18">
<li>We will now explore a way to visualize these results. First, we need to
make the table join permanent by saving it to a new layer. Right-click the
<code class="docutils literal"><span class="pre">signif</span></code> layer and select <span class="guilabel">Save As...</span>.</li>
</ol>
<img alt="../_images/1833.png" class="align-center" src="../_images/1833.png" />
<ol class="arabic simple" start="19">
<li>Click the <span class="guilabel">Browse</span> button next to <span class="guilabel">Save as</span> label and
name the output layer as <code class="docutils literal"><span class="pre">earthquake_with_places.shp</span></code>. Make sure the
<span class="guilabel">Add saved file to map</span> box is checked and click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1927.png" class="align-center" src="../_images/1927.png" />
<ol class="arabic simple" start="20">
<li>Once the new layer is loaded, you can turn off the visibility of the
<code class="docutils literal"><span class="pre">signif</span></code> layer. As our dataset is quite large, we can run our
visualization analysis on a subset of the data. QGIS has a neat feature
where you can load a subset of features from a layer without having to
export it to a new layer. Right-click the <code class="docutils literal"><span class="pre">earthquake_with_places</span></code> layer
and select <span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/2020.png" class="align-center" src="../_images/2020.png" />
<ol class="arabic simple" start="21">
<li>In the <span class="guilabel">General</span> tab, scroll down to the <span class="guilabel">Feature
subset</span> section. Click <span class="guilabel">Query Builder</span>.</li>
</ol>
<img alt="../_images/2130.png" class="align-center" src="../_images/2130.png" />
<ol class="arabic simple" start="22">
<li>For this tutorial, we will visualize the earthquakes and their nearest
populated places for Mexico. Enter the following expression in the
<span class="guilabel">Query Builder</span> dialog.</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre><span></span>&quot;COUNTRY&quot; = &#39;MEXICO&#39;
</pre></div>
</div>
<img alt="../_images/2222.png" class="align-center" src="../_images/2222.png" />
<ol class="arabic simple" start="23">
<li>You will see that only the points falling within Mexico will be visible in
the canvas. Let&#8217;s do the same for the populated places layer. Right-click
on the <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple</span></code> layer and select
<span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/2319.png" class="align-center" src="../_images/2319.png" />
<ol class="arabic simple" start="24">
<li>Open the <span class="guilabel">Query Builder</span> dialog from the <span class="guilabel">General</span> tab.
Enter the following expression.</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre><span></span>&quot;adm0name&quot; = &#39;Mexico&#39;
</pre></div>
</div>
<img alt="../_images/2418.png" class="align-center" src="../_images/2418.png" />
<ol class="arabic simple" start="25">
<li>Now we are ready to create our visualization. We will use a plugin named
<code class="docutils literal"><span class="pre">MMQGIS</span></code>. Find and install the plugin. See <a class="reference internal" href="using_plugins.html"><em>Uso de complementos</em></a> for more
details on how to work with plugins. Once you have the plugin installed, go
to <span class="menuselection">MMQGIS ‣ Create ‣ Hub Lines</span>.</li>
</ol>
<img alt="../_images/2517.png" class="align-center" src="../_images/2517.png" />
<ol class="arabic simple" start="26">
<li>Select <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple</span></code> as the <span class="guilabel">Hub Point
Layer</span> and <code class="docutils literal"><span class="pre">name</span></code> as the <span class="guilabel">Hub ID Attribute</span>. Similarly, select
<code class="docutils literal"><span class="pre">earthquake_with_places</span></code> as the <span class="guilabel">Spoke Point Layer</span> and
<code class="docutils literal"><span class="pre">matrix_Tar</span></code> as the <span class="guilabel">Spoke Hub ID Attribute</span>. The hub lines
algorithm will go through each of earthquake points and create a line that
will join it to the populated place which matches the attribute we
specified. Click <span class="guilabel">Browse</span> and name the <span class="guilabel">Output
Shapefile</span> as <code class="docutils literal"><span class="pre">earthquake_hub_lines.shp</span></code>. Click <span class="guilabel">OK</span> to start
the processing.</li>
</ol>
<img alt="../_images/2615.png" class="align-center" src="../_images/2615.png" />
<ol class="arabic simple" start="27">
<li>The processing may take a few minutes. You can see the progress on the
bottom-left corner of the QGIS window.</li>
</ol>
<img alt="../_images/2715.png" class="align-center" src="../_images/2715.png" />
<ol class="arabic simple" start="28">
<li>Once the processing is done, you will see the <code class="docutils literal"><span class="pre">earthquake_hub_lines</span></code>
layer loaded in QGIS. You can see that each earthquake point now has a line
that connects it to the nearest populated place.</li>
</ol>
<img alt="../_images/2813.png" class="align-center" src="../_images/2813.png" />
</div>
</div>





  <div>If you liked tutorials on this site and do check out 
  <a href="http://spatialthoughts.com" target="_blank">spatialthoughts.com</a> for more free resources.
  </div>
  
  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Ujaval Gandhi.<br/>
      Actualizado por última vez en May 20, 2020.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/nearest_neighbor_analysis.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>