<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Realización de uniones de tabla (PyQGIS) &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Mapeo web con QGIS2Web" href="web_mapping_with_qgis2web.html" />
    <link rel="prev" title="Find Neighbor Polygons in a Layer" href="find_neighbor_polygons.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Creando un Mapa</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Trabajo con atributos</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importación de hojas de cálculo o archivos CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Uso de complementos</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Buscando y descargando datos de OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Estilos vectoriales básicos</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Cálculo de longitudes de línea y estadísticas</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Basic Raster Styling and Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Trabajar con datos de terreno</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Trabajando con datos WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Trabajando con proyecciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenciación de hojas topografícas y mapas escaneados</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenciación de imágenes aéreas</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizing Map Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Realización de uniones de tabla</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realización de uniones espaciales</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Análisis de puntos en polígonos</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creando Mapas de Calor</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Realización de consultas espaciales</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Análisis de vecino más cercano</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/automating_map_creation.html">Automating Map Creation with Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Usando QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Contando el numero de vertices en una capa</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Open BIL, BIP or BSQ files in QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Getting Started With Python Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Construir una extension Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Find Neighbor Polygons in a Layer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Realización de uniones de tabla (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Mapeo web con QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Recursos de aprendizaje QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Créditos de los Conjuntos de Datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="find_neighbor_polygons.html" title="Previous Chapter: Find Neighbor Polygons in a Layer"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Find Neighbor Po...</span>
    </a>
  </li>
  <li>
    <a href="web_mapping_with_qgis2web.html" title="Next Chapter: Mapeo web con QGIS2Web"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Mapeo web con QG... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<h4>Subscribe to my mailing list</h4>
<p>Get occasional emails when I post new material or announce training events.</p>
<form action="https://spatialthoughts.us20.list-manage.com/subscribe/post?u=59d493847a7c7c2dbf12b21e6&amp;id=8fb09ab55c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_59d493847a7c7c2dbf12b21e6_8fb09ab55c" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="performing-table-joins-pyqgis">
<h1>Realización de uniones de tabla (PyQGIS)<a class="headerlink" href="#performing-table-joins-pyqgis" title="Enlazar permanentemente con este título">¶</a></h1>
<p>This tutorial shows how to use Python scripting in QGIS (PyQGIS) to perform a
table join and apply a graduated style to the resulting layer. This tutorial
replicates the steps of the <a class="reference internal" href="performing_table_joins.html"><em>Realización de uniones de tabla</em></a> tutorial using only
python scripting.</p>
<div class="section" id="overview-of-the-task">
<h2>Overview of the task<a class="headerlink" href="#overview-of-the-task" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Please refer to <a class="reference internal" href="performing_table_joins.html"><em>Realización de uniones de tabla</em></a> tutorial for the overview.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Other skills you will learn<a class="headerlink" href="#other-skills-you-will-learn" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li>Loading zipped layers in QGIS via Python.</li>
<li>Using QgsGraduatedSymbolRendererV2 to apply a graduated style to a vector
layer.</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Obtener los datos<a class="headerlink" href="#get-the-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Download the following files to your computer.</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/tl_2013_06_tract.zip">tl_2013_06_tract.zip</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ca_tracts_pop.csv">ca_tracts_pop.csv</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ca_tracts_pop.csvt">ca_tracts_pop.csvt</a></p>
<p>Data Source <a class="reference internal" href="credits.html#tiger" id="id1">[TIGER]</a> <a class="reference internal" href="credits.html#uscensus" id="id2">[USCENSUS]</a></p>
</div>
<div class="section" id="procedure">
<h2>Procedmiento<a class="headerlink" href="#procedure" title="Enlazar permanentemente con este título">¶</a></h2>
<p>You can type the following commands in the <span class="guilabel">Python Console</span> or the
built-in <span class="guilabel">Editor</span> in QGIS.</p>
<ol class="arabic simple">
<li>Load the shapefile. The Census Tracts file is a zip file containing the
shapefile. While we can unzip it and load the shapefile, The OGR provider
has the ability to load the zip file directly via a Virtual Filesystem.
Adding <code class="docutils literal"><span class="pre">/vsizip/</span></code> in the path, we can access the shapefile contained in
the zip archive.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">The zip_uri would begin with <code class="docutils literal"><span class="pre">/vsizip//</span></code> on Linux and Mac systems.
(Note the extra /)</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">zip_uri</span> <span class="o">=</span> <span class="s">&#39;/vsizip/C:/Users/Ujaval/Downloads/tl_2013_06_tract.zip&#39;</span>
<span class="n">shp</span> <span class="o">=</span>  <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">zip_uri</span><span class="p">,</span> <span class="s">&#39;tl_2013_06_tract&#39;</span><span class="p">,</span> <span class="s">&#39;ogr&#39;</span><span class="p">)</span>
<span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/1130.png" class="align-center" src="../_images/1130.png" />
<ol class="arabic simple" start="2">
<li>Load the CSV file. As the CSV file doesn&#8217;t contain any spatial data, we load
it as a table using the <code class="docutils literal"><span class="pre">delimitedtext</span></code> provider.</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">csv_uri</span> <span class="o">=</span> <span class="s">&#39;file:///C:/Users/Ujaval/Downloads/ca_tracts_pop.csv?delimiter=,&#39;</span>
<span class="n">csv</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">csv_uri</span><span class="p">,</span> <span class="s">&#39;ca_tracts_pop&#39;</span><span class="p">,</span> <span class="s">&#39;delimitedtext&#39;</span><span class="p">)</span>
<span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">csv</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/288.png" class="align-center" src="../_images/288.png" />
<ol class="arabic simple" start="3">
<li>Create the table join. Table joins in QGIS are performed using
<code class="docutils literal"><span class="pre">QgsVectorJoinInfo</span></code> object. We need to specify the <code class="docutils literal"><span class="pre">GEO.id2</span></code> field from
the CSV layer as the <span class="guilabel">Join Field</span> and the <code class="docutils literal"><span class="pre">GEOID</span></code> field from the
shapefile layer as the <span class="guilabel">Target Field</span>. Once you run the following
code, the shapefile layer will have additional attributes joined from the
csv layer.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">A common pitfall when using QgsVectorJoinInfo is that both the layers must be
loaded in the QgsMapLayerRegistry - otherwise the join would not work.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">shpField</span><span class="o">=</span><span class="s">&#39;GEOID&#39;</span>
<span class="n">csvField</span><span class="o">=</span><span class="s">&#39;GEO.id2&#39;</span>
<span class="n">joinObject</span> <span class="o">=</span> <span class="n">QgsVectorJoinInfo</span><span class="p">()</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">joinLayerId</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">joinFieldName</span> <span class="o">=</span> <span class="n">csvField</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">targetFieldName</span> <span class="o">=</span> <span class="n">shpField</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">memoryCache</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">shp</span><span class="o">.</span><span class="n">addJoin</span><span class="p">(</span><span class="n">joinObject</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/348.png" class="align-center" src="../_images/348.png" />
<ol class="arabic simple" start="4">
<li>An easier - and preferred way of accomplishing the same thing is via the
Processing Framework. You can call the algorithm
<code class="docutils literal"><span class="pre">qgis:joinattributestable</span></code> and create a joined layer.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">We are using the <code class="docutils literal"><span class="pre">processing.runandload()</span></code> method to execute the algorithm
instead of the more common <code class="docutils literal"><span class="pre">processing.runalg()</span></code>. Since we want to load
the resulting joined layer in QGIS, <code class="docutils literal"><span class="pre">processing.runandload()</span></code> is a better
choice.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">processing</span>
<span class="n">shpField</span><span class="o">=</span><span class="s">&#39;GEOID&#39;</span>
<span class="n">csvField</span><span class="o">=</span><span class="s">&#39;GEO.id2&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">runandload</span><span class="p">(</span><span class="s">&#39;qgis:joinattributestable&#39;</span><span class="p">,</span> <span class="n">shp</span><span class="p">,</span> <span class="n">csv</span><span class="p">,</span> <span class="n">shpField</span><span class="p">,</span> <span class="n">csvField</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/429.png" class="align-center" src="../_images/429.png" />
<ol class="arabic simple" start="5">
<li>We will stick with the original join using <code class="docutils literal"><span class="pre">QgsVectorJoinInfo</span></code> for the
remainder of the tutorial. Now it is time to apply a graduated style to the
joined layer. The population field name in the joined layer is
<code class="docutils literal"><span class="pre">ca_tracts_pop_D001</span></code>. We will apply a graduated renderer using the
<code class="docutils literal"><span class="pre">QgsGraduatedSymbolRendererV2</span></code> class in the <code class="docutils literal"><span class="pre">Quantile</span></code> mode. Refer to
<a class="reference internal" href="performing_table_joins.html"><em>Realización de uniones de tabla</em></a> for the colors and ranges that we need to use.</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtGui</span>

<span class="n">myColumn</span> <span class="o">=</span> <span class="s">&#39;ca_tracts_pop_D001 &#39;</span>
<span class="n">myRangeList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">myOpacity</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">ranges</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">myMin1</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">myMax1</span> <span class="o">=</span> <span class="mf">3157.2</span>
<span class="n">myLabel1</span> <span class="o">=</span> <span class="s">&#39;Group 1&#39;</span>
<span class="n">myColor1</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#f7fbff&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin1</span><span class="p">,</span> <span class="n">myMax1</span><span class="p">,</span> <span class="n">myLabel1</span><span class="p">,</span> <span class="n">myColor1</span><span class="p">))</span>

<span class="n">myMin2</span> <span class="o">=</span> <span class="mf">3157.2</span>
<span class="n">myMax2</span> <span class="o">=</span> <span class="mf">4019.0</span>
<span class="n">myLabel2</span> <span class="o">=</span> <span class="s">&#39;Group 2&#39;</span>
<span class="n">myColor2</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#c7dcef&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin2</span><span class="p">,</span> <span class="n">myMax2</span><span class="p">,</span> <span class="n">myLabel2</span><span class="p">,</span> <span class="n">myColor2</span><span class="p">))</span>

<span class="n">myMin3</span> <span class="o">=</span> <span class="mf">4019.0</span>
<span class="n">myMax3</span> <span class="o">=</span> <span class="mf">4865.8</span>
<span class="n">myLabel3</span> <span class="o">=</span> <span class="s">&#39;Group 3&#39;</span>
<span class="n">myColor3</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#72b2d7&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin3</span><span class="p">,</span> <span class="n">myMax3</span><span class="p">,</span> <span class="n">myLabel3</span><span class="p">,</span> <span class="n">myColor3</span><span class="p">))</span>

<span class="n">myMin4</span> <span class="o">=</span> <span class="mf">4865.8</span>
<span class="n">myMax4</span> <span class="o">=</span> <span class="mf">5996.4</span>
<span class="n">myLabel4</span> <span class="o">=</span> <span class="s">&#39;Group 4&#39;</span>
<span class="n">myColor4</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#2878b8&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin4</span><span class="p">,</span> <span class="n">myMax4</span><span class="p">,</span> <span class="n">myLabel4</span><span class="p">,</span> <span class="n">myColor4</span><span class="p">))</span>

<span class="n">myMin5</span> <span class="o">=</span> <span class="mf">5996.4</span>
<span class="n">myMax5</span> <span class="o">=</span> <span class="mf">37452.0</span>
<span class="n">myLabel5</span> <span class="o">=</span> <span class="s">&#39;Group 5&#39;</span>
<span class="n">myColor5</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#08306b&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin5</span><span class="p">,</span> <span class="n">myMax5</span><span class="p">,</span> <span class="n">myLabel5</span><span class="p">,</span> <span class="n">myColor5</span><span class="p">))</span>

<span class="k">for</span> <span class="n">myMin</span><span class="p">,</span> <span class="n">myMax</span><span class="p">,</span> <span class="n">myLabel</span><span class="p">,</span> <span class="n">myColor</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">:</span>
  <span class="n">mySymbol</span> <span class="o">=</span> <span class="n">QgsSymbolV2</span><span class="o">.</span><span class="n">defaultSymbol</span><span class="p">(</span><span class="n">shp</span><span class="o">.</span><span class="n">geometryType</span><span class="p">())</span>
  <span class="n">mySymbol</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">myColor</span><span class="p">)</span>
  <span class="n">mySymbol</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="n">myOpacity</span><span class="p">)</span>
  <span class="n">myRange</span> <span class="o">=</span> <span class="n">QgsRendererRangeV2</span><span class="p">(</span><span class="n">myMin</span><span class="p">,</span> <span class="n">myMax</span><span class="p">,</span> <span class="n">mySymbol</span><span class="p">,</span> <span class="n">myLabel</span><span class="p">)</span>
  <span class="n">myRangeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myRange</span><span class="p">)</span>

<span class="n">myRenderer</span> <span class="o">=</span> <span class="n">QgsGraduatedSymbolRendererV2</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">myRangeList</span><span class="p">)</span>
<span class="n">myRenderer</span><span class="o">.</span><span class="n">setMode</span><span class="p">(</span><span class="n">QgsGraduatedSymbolRendererV2</span><span class="o">.</span><span class="n">Quantile</span><span class="p">)</span>
<span class="n">myRenderer</span><span class="o">.</span><span class="n">setClassAttribute</span><span class="p">(</span><span class="n">myColumn</span><span class="p">)</span>

<span class="n">shp</span><span class="o">.</span><span class="n">setRendererV2</span><span class="p">(</span><span class="n">myRenderer</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/530.png" class="align-center" src="../_images/530.png" />
<ol class="arabic simple" start="6">
<li>Typing the code in the Python Console is useful for small tasks, but it
is far easier to use the built-in <span class="guilabel">Editor</span>. You can copy the
entire script in the <span class="guilabel">Editor</span> and click <span class="guilabel">Run</span>. As the
script finishes, you would have created a table join and styled the
resulting layer without any manual steps.</li>
</ol>
<img alt="../_images/628.png" class="align-center" src="../_images/628.png" />
<p>Below is the full <code class="docutils literal"><span class="pre">join_attributes.py</span></code> file as a reference.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtGui</span>
<span class="n">zip_uri</span> <span class="o">=</span> <span class="s">&#39;/vsizip/C:/Users/Ujaval/Downloads/tl_2013_06_tract.zip/tl_2013_06_tract.shp&#39;</span>
<span class="n">shp</span> <span class="o">=</span>  <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">zip_uri</span><span class="p">,</span> <span class="s">&#39;tl_2013_06_tract&#39;</span><span class="p">,</span> <span class="s">&#39;ogr&#39;</span><span class="p">)</span>
<span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>

<span class="n">csv_uri</span> <span class="o">=</span> <span class="s">&quot;file:///C:/Users/Ujaval/Downloads/ca_tracts_pop.csv?delimiter=,&quot;</span>
<span class="n">csv</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">csv_uri</span><span class="p">,</span> <span class="s">&quot;ca_tracts_pop&quot;</span><span class="p">,</span> <span class="s">&quot;delimitedtext&quot;</span><span class="p">)</span>
<span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">csv</span><span class="p">)</span>

<span class="n">shpField</span><span class="o">=</span><span class="s">&#39;GEOID&#39;</span>
<span class="n">csvField</span><span class="o">=</span><span class="s">&#39;GEO.id2&#39;</span>
<span class="n">joinObject</span> <span class="o">=</span> <span class="n">QgsVectorJoinInfo</span><span class="p">()</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">joinLayerId</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">joinFieldName</span> <span class="o">=</span> <span class="n">csvField</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">targetFieldName</span> <span class="o">=</span> <span class="n">shpField</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">memoryCache</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">shp</span><span class="o">.</span><span class="n">addJoin</span><span class="p">(</span><span class="n">joinObject</span><span class="p">)</span>

<span class="n">myColumn</span> <span class="o">=</span> <span class="s">&#39;ca_tracts_pop_D001 &#39;</span>
<span class="n">myRangeList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">myOpacity</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">ranges</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">myMin1</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">myMax1</span> <span class="o">=</span> <span class="mf">3157.2</span>
<span class="n">myLabel1</span> <span class="o">=</span> <span class="s">&#39;Group 1&#39;</span>
<span class="n">myColor1</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#f7fbff&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin1</span><span class="p">,</span> <span class="n">myMax1</span><span class="p">,</span> <span class="n">myLabel1</span><span class="p">,</span> <span class="n">myColor1</span><span class="p">))</span>

<span class="n">myMin2</span> <span class="o">=</span> <span class="mf">3157.2</span>
<span class="n">myMax2</span> <span class="o">=</span> <span class="mf">4019.0</span>
<span class="n">myLabel2</span> <span class="o">=</span> <span class="s">&#39;Group 2&#39;</span>
<span class="n">myColor2</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#c7dcef&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin2</span><span class="p">,</span> <span class="n">myMax2</span><span class="p">,</span> <span class="n">myLabel2</span><span class="p">,</span> <span class="n">myColor2</span><span class="p">))</span>

<span class="n">myMin3</span> <span class="o">=</span> <span class="mf">4019.0</span>
<span class="n">myMax3</span> <span class="o">=</span> <span class="mf">4865.8</span>
<span class="n">myLabel3</span> <span class="o">=</span> <span class="s">&#39;Group 3&#39;</span>
<span class="n">myColor3</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#72b2d7&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin3</span><span class="p">,</span> <span class="n">myMax3</span><span class="p">,</span> <span class="n">myLabel3</span><span class="p">,</span> <span class="n">myColor3</span><span class="p">))</span>

<span class="n">myMin4</span> <span class="o">=</span> <span class="mf">4865.8</span>
<span class="n">myMax4</span> <span class="o">=</span> <span class="mf">5996.4</span>
<span class="n">myLabel4</span> <span class="o">=</span> <span class="s">&#39;Group 4&#39;</span>
<span class="n">myColor4</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#2878b8&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin4</span><span class="p">,</span> <span class="n">myMax4</span><span class="p">,</span> <span class="n">myLabel4</span><span class="p">,</span> <span class="n">myColor4</span><span class="p">))</span>

<span class="n">myMin5</span> <span class="o">=</span> <span class="mf">5996.4</span>
<span class="n">myMax5</span> <span class="o">=</span> <span class="mf">37452.0</span>
<span class="n">myLabel5</span> <span class="o">=</span> <span class="s">&#39;Group 5&#39;</span>
<span class="n">myColor5</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s">&#39;#08306b&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin5</span><span class="p">,</span> <span class="n">myMax5</span><span class="p">,</span> <span class="n">myLabel5</span><span class="p">,</span> <span class="n">myColor5</span><span class="p">))</span>

<span class="k">for</span> <span class="n">myMin</span><span class="p">,</span> <span class="n">myMax</span><span class="p">,</span> <span class="n">myLabel</span><span class="p">,</span> <span class="n">myColor</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">:</span>
    <span class="n">mySymbol</span> <span class="o">=</span> <span class="n">QgsSymbolV2</span><span class="o">.</span><span class="n">defaultSymbol</span><span class="p">(</span><span class="n">shp</span><span class="o">.</span><span class="n">geometryType</span><span class="p">())</span>
    <span class="n">mySymbol</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">myColor</span><span class="p">)</span>
    <span class="n">mySymbol</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="n">myOpacity</span><span class="p">)</span>
    <span class="n">myRange</span> <span class="o">=</span> <span class="n">QgsRendererRangeV2</span><span class="p">(</span><span class="n">myMin</span><span class="p">,</span> <span class="n">myMax</span><span class="p">,</span> <span class="n">mySymbol</span><span class="p">,</span> <span class="n">myLabel</span><span class="p">)</span>
    <span class="n">myRangeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myRange</span><span class="p">)</span>

<span class="n">myRenderer</span> <span class="o">=</span> <span class="n">QgsGraduatedSymbolRendererV2</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">myRangeList</span><span class="p">)</span>
<span class="n">myRenderer</span><span class="o">.</span><span class="n">setMode</span><span class="p">(</span><span class="n">QgsGraduatedSymbolRendererV2</span><span class="o">.</span><span class="n">Quantile</span><span class="p">)</span>
<span class="n">myRenderer</span><span class="o">.</span><span class="n">setClassAttribute</span><span class="p">(</span><span class="n">myColumn</span><span class="p">)</span>

<span class="n">shp</span><span class="o">.</span><span class="n">setRendererV2</span><span class="p">(</span><span class="n">myRenderer</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Ujaval Gandhi.<br/>
      Actualizado por última vez en Mar 22, 2019.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/performing_table_joins_pyqgis.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>