<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Batch Processing using Processing Framework (QGIS2) &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="prev" title="Data Credits" href="credits.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Giới thiệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Thành lập bản đồ</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Làm việc với thuộc tính</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Nhập file dạng bảng hay CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Tìm kiếm và tải xuống dữ liệu OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Trình bày vector cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Tính toán và thống kê chiều dài đường</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Trình bày và phân tích raster cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Chắp - mosaic và cắt- clip mảnh raster</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Làm việc với dữ liệu địa hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Làm việc với Dữ liệu WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Nắn chỉnh mảnh bản đồ địa hình và bản đồ quét</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Nắn chỉnh ảnh hàng không</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Số hóa dữ liệu bản đồ</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Thực hiện Table Joins - liên kết theo bảng</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Thực hiện Spatial Joins - liên kết theo không gian</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Điểm trong phân tích vùng</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Thiết lập bản đồ sử dụng thang màu biến đổi liên tục</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Thực hiện các truy vấn theo không gian</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Phân tích người láng giềng gần nhất</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Lấy mẫu dữ liệu raster bằng điểm hoặc vùng - Points or Polygons</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Nội suy dữ liệu dạng điểm</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Tự động thành lập bản đồ bằng công cụ Print Composer Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Sử dụng QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Đếm số lượng nút trong một lớp</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Mở file BIL, BIP hay BSQ trong QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Làm quen với lập trình Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Xây dựng công cụ bằng ngôn ngữ Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Viết ngôn ngữ Python cho Processing Framework - khung xử lý</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Chạy và thiết lập chương trình xử lý QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Find Neighbor Polygons in a Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Performing Table Joins (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Lập bản đồ trên mạng với QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Các nguồn học QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Data Credits</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="credits.html" title="Previous Chapter: Data Credits"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Data Credits</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="batch-processing-using-processing-framework-qgis2">
<h1>Batch Processing using Processing Framework (QGIS2)<a class="headerlink" href="#batch-processing-using-processing-framework-qgis2" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Cảnh báo</p>
<p class="last">A new version of this tutorial is available at <a class="reference internal" href="3/batch_processing.html"><em>Batch Processing using Processing Framework (QGIS3)</em></a></p>
</div>
<p>QGIS 2.0 introduced a new concept called <strong>Processing Framework</strong>. Previously
known as <strong>Sextante</strong>, the Processing Framework provides an environment within
QGIS to run native and third-party algorithms for processing data. It contains
a nice batch processing interface that allows one to execute an algorithm on
several layers easily. Batch processing is a useful tool that can save manual
effort and help you automate repetitive tasks.</p>
<div class="section" id="overview-of-the-task">
<h2>Tổng quan về nhiệm vụ<a class="headerlink" href="#overview-of-the-task" title="Permalink to this headline">¶</a></h2>
<p>We will take several global vector layers and clip them to the extent of Africa
in a single batch command.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Các kỹ năng bạn sẽ học được<a class="headerlink" href="#other-skills-you-will-learn" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="first">Dissolve (gộp) polygons có cùng chung thuộc tính trong lớp.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Nhận dữ liệu<a class="headerlink" href="#get-the-data" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://naturalearthdata.com">Natural Earth</a> có một số lớp vector cho toàn thế giới. Tải xuống các lớp sau đây</p>
<ul class="simple">
<li><p class="first"><a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_0_countries.zip">Hành chính 0 - Quốc gia</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_railroads.zip">Đường sắt</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_ports.zip">Cảng</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_airports.zip">Sân bay</a></p>
</li>
</ul>
<p>Sau khi đã tải xuống, giải nén và xuất các shapefiles vào cùng một thư mục.</p>
<p>Data Source: <a class="reference internal" href="credits.html#naturalearth" id="id1">[NATURALEARTH]</a></p>
</div>
<div class="section" id="procedure">
<h2>Các bước thực hiện<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">Vào <span class="menuselection">Layer ‣ Add Vector Layer</span>.</p>
</li>
</ol>
<img alt="../_images/118.png" class="align-center" src="../_images/118.png" />
<ol class="arabic simple" start="2">
<li>Browse to the downloaded Admin 0 Countries shapefile
<code class="docutils literal"><span class="pre">ne_10m_admin_0_countries.shp</span></code> and click <span class="guilabel">Open</span>.</li>
</ol>
<img alt="../_images/216.png" class="align-center" src="../_images/216.png" />
<ol class="arabic simple" start="3">
<li>As our task is to clip the global layers to the boundary of Africa, we need
to first prepare a layer containg a polygon for the entire continent. The
countries layer has an attribute called <strong>CONTINENT</strong>. We can use a
geoprocessing concept called <em>Dissolve</em> to merge all countries that have the
same continent value and merge them to a single polygon.</li>
</ol>
<img alt="../_images/37.png" class="align-center" src="../_images/37.png" />
<ol class="arabic simple" start="4">
<li>Open the <span class="guilabel">Dissolve</span> tool from <span class="menuselection">Vector ‣
Geoprocessing Tools ‣ Dissolve</span>.</li>
</ol>
<img alt="../_images/45.png" class="align-center" src="../_images/45.png" />
<ol class="arabic simple" start="5">
<li>Select <code class="docutils literal"><span class="pre">ne_10m_admin_0_countries</span></code> as the <span class="guilabel">Input vector layer</span>.
The <span class="guilabel">Dissolve field</span> would be <code class="docutils literal"><span class="pre">CONTINENT</span></code>. Name the output file
as <code class="docutils literal"><span class="pre">continents.shp</span></code> and  check the box next to <span class="guilabel">Add result to
convas</span>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Ghi chú</p>
<p class="last">If you want to merge <strong>ALL</strong> polygons regardless of their attributes, you
can select <span class="guilabel">&#8211; Dissolve All &#8211;</span> as the <span class="guilabel">Dissolve field</span>.
This will combine all polygons in the layer and give you a single aggregate
polygon.</p>
</div>
<img alt="../_images/55.png" class="align-center" src="../_images/55.png" />
<ol class="arabic simple" start="6">
<li>The dissolve processing may take a while. Once the process finishes, you
will see the new <code class="docutils literal"><span class="pre">continent</span></code> layer added to QGIS. Use the
<span class="guilabel">Select Single Feature</span> tool from the toolbar and click on Africa
to select the polygon representing the continent.</li>
</ol>
<img alt="../_images/65.png" class="align-center" src="../_images/65.png" />
<ol class="arabic simple" start="7">
<li><p class="first">Click chuột phải vào lớp <code class="docutils literal"><span class="pre">continents</span></code> và lựa chọn <span class="guilabel">Save Selection As...</span>.</p>
</li>
</ol>
<img alt="../_images/75.png" class="align-center" src="../_images/75.png" />
<ol class="arabic simple" start="8">
<li>Name the output file as <code class="docutils literal"><span class="pre">africa.shp</span></code>. Since we are only interested in the
shape of the continent and not any attributes, you may check the
<span class="guilabel">Skip attribute creation</span>. Make sure the <span class="guilabel">Add saved file
to map</span> box is checked and click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/85.png" class="align-center" src="../_images/85.png" />
<ol class="arabic simple" start="9">
<li>Now you will have the <code class="docutils literal"><span class="pre">africa</span></code> layer loaded in QGIS containing a single
polygon for the entire continent. Now, it&#8217;s time to start our batch clip
process. Open <span class="menuselection">Processing ‣ Toolbox</span>.</li>
</ol>
<img alt="../_images/95.png" class="align-center" src="../_images/95.png" />
<ol class="arabic simple" start="10">
<li>Browse all available algorithms and find the <span class="guilabel">Clip</span> tool from
<span class="menuselection">QGIS geoalgorithms ‣ Vector overlay tools ‣ Clip</span>. You
may also use the <span class="guilabel">Search</span> box to easily find the algorithm as
well.</li>
</ol>
<img alt="../_images/105.png" class="align-center" src="../_images/105.png" />
<ol class="arabic simple" start="11">
<li>Right-click the <span class="guilabel">Clip</span> algorithm and select <span class="guilabel">Execure as
batch process</span>.</li>
</ol>
<img alt="../_images/119.png" class="align-center" src="../_images/119.png" />
<ol class="arabic simple" start="12">
<li>In the <span class="guilabel">Batch Processing</span> dialog, the first tab is
<span class="guilabel">Parameters</span> where we define out inputs. Click the
<span class="guilabel">...</span> next to the first row in the <span class="guilabel">Input layer</span> column.</li>
</ol>
<img alt="../_images/125.png" class="align-center" src="../_images/125.png" />
<ol class="arabic simple" start="13">
<li>Browse to the directory containing the global transportation layers that
you had downloaded. Hold the <code class="kbd docutils literal"><span class="pre">Ctrl</span></code> key and select all the layers that
you want to clip. You may also use <code class="kbd docutils literal"><span class="pre">Shift</span></code> or <code class="kbd docutils literal"><span class="pre">Ctrl-A</span></code> to make
multiple selection. Click <span class="guilabel">Open</span>.</li>
</ol>
<img alt="../_images/135.png" class="align-center" src="../_images/135.png" />
<ol class="arabic simple" start="14">
<li>You will notice that the <span class="guilabel">Input layer</span> columns will be
auto-populated with all layers you had selected. You may use <span class="guilabel">Add
row</span> button to add more rows and define more inputs. Next, we need to
select the layer containing the boundary to clip our input layers. Click the
<span class="guilabel">...</span> button for the first row and add the <code class="docutils literal"><span class="pre">africa.shp</span></code>
<span class="guilabel">Clip layer</span>. Since the clip layer is the same for all our inputs,
you can double-click the column header <span class="guilabel">Clip layer</span> and the same
layer will be auto-filled for all the rows. Next, we need to define our
outputs.  Click the <span class="guilabel">...</span> buton next to the first row in the
<span class="guilabel">Clipped</span> column.</li>
</ol>
<img alt="../_images/145.png" class="align-center" src="../_images/145.png" />
<ol class="arabic simple" start="15">
<li>Browse the the directory where you want your output layers. Type the
filename as <code class="docutils literal"><span class="pre">clipped_</span></code> and click <span class="guilabel">Save</span>.</li>
</ol>
<img alt="../_images/155.png" class="align-center" src="../_images/155.png" />
<ol class="arabic simple" start="16">
<li>You will see a new <span class="guilabel">Autofill settings</span> dialog pop up. Select
<span class="guilabel">Fill with parameter values</span> as the <span class="guilabel">Autofill mode</span>.
Select <span class="guilabel">Parameter to use</span> as <span class="guilabel">Input layer</span>. This
setting will add the input file name to the output along with the specified
<code class="docutils literal"><span class="pre">output_</span></code> filename. This is important to ensure all the output files have
unique names and they do not overwrite each other.</li>
</ol>
<img alt="../_images/165.png" class="align-center" src="../_images/165.png" />
<ol class="arabic simple" start="17">
<li><p class="first">Thế là ta đã sẵn sàng chạy xử lý hàng loạt. Bấm chuôt vào <span class="guilabel">Run</span>.</p>
</li>
</ol>
<img alt="../_images/174.png" class="align-center" src="../_images/174.png" />
<ol class="arabic simple" start="18">
<li>The clip algorithm will run for each of the inputs and create output files
are we have specified. Once the batch process finishes, you will see the
layers added to QGIS canvas. As you will notice, all the global layers are
properly clipped to the continent boundary that we had specified.</li>
</ol>
<img alt="../_images/185.png" class="align-center" src="../_images/185.png" />
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Bản quyền thuộc 2016, Ujaval Gandhi.<br/>
      Cập nhật mới nhất vào Feb 20, 2019.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/batch_processing.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>