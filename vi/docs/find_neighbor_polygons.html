<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Find Neighbor Polygons in a Layer &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Performing Table Joins (PyQGIS)" href="performing_table_joins_pyqgis.html" />
    <link rel="prev" title="Chạy và thiết lập chương trình xử lý QGIS" href="running_qgis_jobs.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Giới thiệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Thành lập bản đồ</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Làm việc với thuộc tính</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Nhập file dạng bảng hay CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Tìm kiếm và tải xuống dữ liệu OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Trình bày vector cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Tính toán và thống kê chiều dài đường</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Trình bày và phân tích raster cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Chắp - mosaic và cắt- clip mảnh raster</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Làm việc với dữ liệu địa hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Làm việc với Dữ liệu WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Nắn chỉnh mảnh bản đồ địa hình và bản đồ quét</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Nắn chỉnh ảnh hàng không</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Số hóa dữ liệu bản đồ</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Thực hiện Table Joins - liên kết theo bảng</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Thực hiện Spatial Joins - liên kết theo không gian</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Điểm trong phân tích vùng</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Thiết lập bản đồ sử dụng thang màu biến đổi liên tục</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Thực hiện các truy vấn theo không gian</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Phân tích người láng giềng gần nhất</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Lấy mẫu dữ liệu raster bằng điểm hoặc vùng - Points or Polygons</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Nội suy dữ liệu dạng điểm</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Xử lý hàng loạt - batch processing bằng Processing Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Tự động hóa các quy trình phức tạp bằng Processing Modeler</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Tự động thành lập bản đồ bằng công cụ Print Composer Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Sử dụng QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Đếm số lượng nút trong một lớp</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Mở file BIL, BIP hay BSQ trong QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Làm quen với lập trình Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Xây dựng công cụ bằng ngôn ngữ Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Viết ngôn ngữ Python cho Processing Framework - khung xử lý</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Chạy và thiết lập chương trình xử lý QGIS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Find Neighbor Polygons in a Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Performing Table Joins (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Các nguồn học QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Data Credits</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="running_qgis_jobs.html" title="Previous Chapter: Chạy và thiết lập chương trình xử lý QGIS"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Chạy và thiết lậ...</span>
    </a>
  </li>
  <li>
    <a href="performing_table_joins_pyqgis.html" title="Next Chapter: Performing Table Joins (PyQGIS)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Performing Table... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="find-neighbor-polygons-in-a-layer">
<h1>Find Neighbor Polygons in a Layer<a class="headerlink" href="#find-neighbor-polygons-in-a-layer" title="Permalink to this headline">¶</a></h1>
<p>There are some use cases where you want to find all neighboring polygons of
each of the polygons in a layer. With a little python script, we can accomplish
this and much more in QGIS. Here is an example script you can use to find all
polygons that share boundary with each of the polygons in a layer and also add
their names to the attribute table. As an added bonus, the script also sums up
an attribute of your choice from all the neighboring polygons.</p>
<div class="section" id="overview-of-the-task">
<h2>Tổng quan về nhiệm vụ<a class="headerlink" href="#overview-of-the-task" title="Permalink to this headline">¶</a></h2>
<p>To demonstrate how the script works, we will use a layer of country polygons
and find countries that share the border. We also want to compute the total
population of the country’s neighbors.</p>
</div>
<div class="section" id="get-the-data">
<h2>Nhận dữ liệu<a class="headerlink" href="#get-the-data" title="Permalink to this headline">¶</a></h2>
<p>We will use the <a class="reference external" href="http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-admin-0-countries/">Admin 0 - Countries</a>
dataset from Natural Earth.</p>
<p>Download the <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_0_countries.zip">Admin 0 - countries shapefile.</a>.</p>
<p>Nguồn dữ liệu <a class="reference internal" href="credits.html#naturalearth" id="id1">[NATURALEARTH]</a></p>
</div>
<div class="section" id="get-the-script">
<h2>Get the script<a class="headerlink" href="#get-the-script" title="Permalink to this headline">¶</a></h2>
<p>Download the <a class="reference download internal" href="../_downloads/neighbors.py" download=""><code class="xref download docutils literal"><span class="pre">neighbors.py</span> <span class="pre">script</span></code></a>
and save it to your disk.</p>
</div>
<div class="section" id="procedure">
<h2>Các bước thực hiện<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Load the <code class="docutils literal"><span class="pre">ne_10m_admin_0_countries</span></code> layer by going to
<span class="menuselection">Layer ‣ Add Vector Layer</span>.</li>
</ol>
<img alt="../_images/140.png" class="align-center" src="../_images/140.png" />
<ol class="arabic simple" start="2">
<li>The script uses 2 fields to perform the action. A name field and a field
that you want to sum up. Use the <span class="guilabel">Identify</span> tool to click on any
feature and examine the attributes. In this case the name field is <strong>NAME</strong> and we want
to sum up the population estimates from <strong>POP_EST</strong> field.</li>
</ol>
<img alt="../_images/226.png" class="align-center" src="../_images/226.png" />
<ol class="arabic simple" start="3">
<li>Go to <span class="menuselection">Plugins ‣ Python Console</span>.</li>
</ol>
<img alt="../_images/317.png" class="align-center" src="../_images/317.png" />
<ol class="arabic simple" start="4">
<li>In the <span class="guilabel">Python Console</span> window, click the <span class="guilabel">Show Editor</span>
button.</li>
</ol>
<img alt="../_images/412.png" class="align-center" src="../_images/412.png" />
<ol class="arabic simple" start="5">
<li>In the <span class="guilabel">Editor</span> panel, click the <span class="guilabel">Open file</span> button and
browse to downloaded <code class="docutils literal"><span class="pre">neighbors.py</span></code> script and click <span class="guilabel">Open</span>.</li>
</ol>
<img alt="../_images/512.png" class="align-center" src="../_images/512.png" />
<ol class="arabic simple" start="6">
<li>Once the script is loaded, you may want to change the <code class="docutils literal"><span class="pre">_NAME_FIELD</span></code> and
<code class="docutils literal"><span class="pre">_SUM_FIELD</span></code> values to match the attributes from your own layer. If you
are working with the <code class="docutils literal"><span class="pre">ne_10m_admin_0_countries</span></code> layer, you can leave those
as they are. Click the <span class="guilabel">Save</span> button in the <span class="guilabel">Editor</span>
panel if you made any changes. Now click the <span class="guilabel">Run script</span> button
to execute the script.</li>
</ol>
<img alt="../_images/611.png" class="align-center" src="../_images/611.png" />
<ol class="arabic simple" start="7">
<li>Once the script finishes, right-click the <code class="docutils literal"><span class="pre">ne_10m_admin_0_countries</span></code> layer
and select <span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/711.png" class="align-center" src="../_images/711.png" />
<ol class="arabic simple" start="8">
<li>You will notice 2 new attributes called <code class="docutils literal"><span class="pre">NEIGHBORS</span></code> and <code class="docutils literal"><span class="pre">SUM</span></code>. These
were added by the script.</li>
</ol>
<img alt="../_images/811.png" class="align-center" src="../_images/811.png" />
<p>Below is the complete script for reference. You may modify it to suit your
needs.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">################################################################################</span>
<span class="c"># Copyright 2014 Ujaval Gandhi</span>
<span class="c">#</span>
<span class="c">#This program is free software; you can redistribute it and/or</span>
<span class="c">#modify it under the terms of the GNU General Public License</span>
<span class="c">#as published by the Free Software Foundation; either version 2</span>
<span class="c">#of the License, or (at your option) any later version.</span>
<span class="c">#</span>
<span class="c">#This program is distributed in the hope that it will be useful,</span>
<span class="c">#but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">#GNU General Public License for more details.</span>
<span class="c">#</span>
<span class="c">#You should have received a copy of the GNU General Public License</span>
<span class="c">#along with this program; if not, write to the Free Software</span>
<span class="c">#Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</span>
<span class="c">#</span>
<span class="c">################################################################################</span>
<span class="kn">from</span> <span class="nn">qgis.utils</span> <span class="kn">import</span> <span class="n">iface</span>
<span class="kn">from</span> <span class="nn">PyQt4.QtCore</span> <span class="kn">import</span> <span class="n">QVariant</span>

<span class="c"># Replace the values below with values from your layer.</span>
<span class="c"># For example, if your identifier field is called &#39;XYZ&#39;, then change the line</span>
<span class="c"># below to _NAME_FIELD = &#39;XYZ&#39;</span>
<span class="n">_NAME_FIELD</span> <span class="o">=</span> <span class="s">&#39;NAME&#39;</span>
<span class="c"># Replace the value below with the field name that you want to sum up.</span>
<span class="c"># For example, if the # field that you want to sum up is called &#39;VALUES&#39;, then</span>
<span class="c"># change the line below to _SUM_FIELD = &#39;VALUES&#39;</span>
<span class="n">_SUM_FIELD</span> <span class="o">=</span> <span class="s">&#39;POP_EST&#39;</span>

<span class="c"># Names of the new fields to be added to the layer</span>
<span class="n">_NEW_NEIGHBORS_FIELD</span> <span class="o">=</span> <span class="s">&#39;NEIGHBORS&#39;</span>
<span class="n">_NEW_SUM_FIELD</span> <span class="o">=</span> <span class="s">&#39;SUM&#39;</span>

<span class="n">layer</span> <span class="o">=</span> <span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">()</span>

<span class="c"># Create 2 new fields in the layer that will hold the list of neighbors and sum</span>
<span class="c"># of the chosen field.</span>
<span class="n">layer</span><span class="o">.</span><span class="n">startEditing</span><span class="p">()</span>
<span class="n">layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span><span class="o">.</span><span class="n">addAttributes</span><span class="p">(</span>
        <span class="p">[</span><span class="n">QgsField</span><span class="p">(</span><span class="n">_NEW_NEIGHBORS_FIELD</span><span class="p">,</span> <span class="n">QVariant</span><span class="o">.</span><span class="n">String</span><span class="p">),</span>
         <span class="n">QgsField</span><span class="p">(</span><span class="n">_NEW_SUM_FIELD</span><span class="p">,</span> <span class="n">QVariant</span><span class="o">.</span><span class="n">Int</span><span class="p">)])</span>
<span class="n">layer</span><span class="o">.</span><span class="n">updateFields</span><span class="p">()</span>
<span class="c"># Create a dictionary of all features</span>
<span class="n">feature_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="o">.</span><span class="n">id</span><span class="p">():</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()}</span>

<span class="c"># Build a spatial index</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">QgsSpatialIndex</span><span class="p">()</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">feature_dict</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">index</span><span class="o">.</span><span class="n">insertFeature</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c"># Loop through all features and find features that touch each feature</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">feature_dict</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&#39;Working on </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">[</span><span class="n">_NAME_FIELD</span><span class="p">]</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="c"># Find all features that intersect the bounding box of the current feature.</span>
    <span class="c"># We use spatial index to find the features intersecting the bounding box</span>
    <span class="c"># of the current feature. This will narrow down the features that we need</span>
    <span class="c"># to check neighboring features.</span>
    <span class="n">intersecting_ids</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">boundingBox</span><span class="p">())</span>
    <span class="c"># Initalize neighbors list and sum</span>
    <span class="n">neighbors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">neighbors_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">intersecting_id</span> <span class="ow">in</span> <span class="n">intersecting_ids</span><span class="p">:</span>
        <span class="c"># Look up the feature from the dictionary</span>
        <span class="n">intersecting_f</span> <span class="o">=</span> <span class="n">feature_dict</span><span class="p">[</span><span class="n">intersecting_id</span><span class="p">]</span>

        <span class="c"># For our purpose we consider a feature as &#39;neighbor&#39; if it touches or</span>
        <span class="c"># intersects a feature. We use the &#39;disjoint&#39; predicate to satisfy</span>
        <span class="c"># these conditions. So if a feature is not disjoint, it is a neighbor.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">f</span> <span class="o">!=</span> <span class="n">intersecting_f</span> <span class="ow">and</span>
            <span class="ow">not</span> <span class="n">intersecting_f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">disjoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)):</span>
            <span class="n">neighbors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intersecting_f</span><span class="p">[</span><span class="n">_NAME_FIELD</span><span class="p">])</span>
            <span class="n">neighbors_sum</span> <span class="o">+=</span> <span class="n">intersecting_f</span><span class="p">[</span><span class="n">_SUM_FIELD</span><span class="p">]</span>
    <span class="n">f</span><span class="p">[</span><span class="n">_NEW_NEIGHBORS_FIELD</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">neighbors</span><span class="p">)</span>
    <span class="n">f</span><span class="p">[</span><span class="n">_NEW_SUM_FIELD</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbors_sum</span>
    <span class="c"># Update the layer with new attribute values.</span>
    <span class="n">layer</span><span class="o">.</span><span class="n">updateFeature</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">layer</span><span class="o">.</span><span class="n">commitChanges</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;Processing complete.&#39;</span>
</pre></div>
</div>
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Bản quyền thuộc 2016, Ujaval Gandhi.<br/>
      Cập nhật mới nhất vào Jan 24, 2017.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/find_neighbor_polygons.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>