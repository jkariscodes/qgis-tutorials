<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Analyse du voisin le plus proche &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Sampling Raster Data using Points or Polygons" href="sampling_raster_data.html" />
    <link rel="prev" title="Performing Spatial Queries" href="performing_spatial_queries.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/making_a_map.html">Making a Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Travailler avec les attributs</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Searching and Downloading OpenStreetMap Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Basic Vector Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calculating Line Lengths and Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Basic Raster Styling and Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/georeferencing_basics.html">Georeferencing Topo Sheets and Scanned Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Image aérienne géoréférencée</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizing Map Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Les Jointures de tables (JOIN)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Effectuer des jointures spatiales</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Analyse des Points dans le Polygone</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Analyse du voisin le plus proche</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Traitement par lots en utilisant le framework de traitement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/automating_map_creation.html">Création automatisée de cartes avec l&#8217;Atlas de l&#8217;outil de mise en page (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Using the QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Counting Number of Vertices in a Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Open BIL, BIP or BSQ files in QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_scripts.html">Écrire des scripts Python pour la structure de traitement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Find Neighbor Polygons in a Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Performing Table Joins (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Créer des fonds de carte avec QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Ressources pour l&#8217;apprentissage de QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Crédits</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="performing_spatial_queries.html" title="Previous Chapter: Performing Spatial Queries"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Performing Sp...</span>
    </a>
  </li>
  <li>
    <a href="sampling_raster_data.html" title="Next Chapter: Sampling Raster Data using Points or Polygons"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Sampling Rast... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<h4>Subscribe to my mailing list</h4>
<p>Get occasional emails when I post new material or announce training events.</p>
<form action="https://spatialthoughts.us20.list-manage.com/subscribe/post?u=59d493847a7c7c2dbf12b21e6&amp;id=8fb09ab55c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_59d493847a7c7c2dbf12b21e6_8fb09ab55c" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>

<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="nearest-neighbor-analysis">
<h1>Analyse du voisin le plus proche<a class="headerlink" href="#nearest-neighbor-analysis" title="Lien permanent vers ce titre">¶</a></h1>
<p>Les SIG sont très utiles réalise des analyses spatiales entre objets. L&#8217;une de ces analyses permet, pour un objet donné, de déterminer quels sont les objets les plus proches . QGis a un outils appelé <strong>Matrice de Distance</strong> qui nous aide à réaliser de telle analyse. Dans ce tutoriel, nous utiliserons 2 lots de données et déterminerons quels points d&#8217;une première couche sont les proches de la seconde.</p>
<div class="section" id="overview-of-the-task">
<h2>Description de l&#8217;exercice<a class="headerlink" href="#overview-of-the-task" title="Lien permanent vers ce titre">¶</a></h2>
<p>D&#8217;après le positionnement des séismes les plus importants répertoriés, déterminer quelles sont les lieux habités les plus proches</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Autres compétences que vous allez développer<a class="headerlink" href="#other-skills-you-will-learn" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first">Comment faire une jointure dans QGIS. (Voir <a class="reference internal" href="performing_table_joins.html"><em>Les Jointures de tables (JOIN)</em></a> pour les instructions détaillées.)</p>
</li>
<li>Using <span class="guilabel">Query Builder</span> to show a subset of features from a layer.</li>
<li><p class="first">Utiliser le plugin MMQGis pour créer des lignes connectés et visualiser les voisins les plus proches</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Récupérer les données<a class="headerlink" href="#get-the-data" title="Lien permanent vers ce titre">¶</a></h2>
<p>We will use NOAA’s National Geophysical Data Center’s <a class="reference external" href="http://www.ngdc.noaa.gov/nndc/struts/form?t=101650&amp;s=1&amp;d=1">Significant Earthquake
Database</a> as our
layer representing all major earthquakes. Download the <a class="reference external" href="http://www.ngdc.noaa.gov/nndc/struts/results?type_0=Exact&amp;query_0=$ID&amp;t=101650&amp;s=13&amp;d=189&amp;dfn=signif.txt">tab-delimited
earthquake data</a>.</p>
<p>&#8220;Natural Earth&#8221; propose des données intéressantes sur les espaces peuplés. <a class="reference external" href="http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-populated-places">http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-populated-places</a>
Téléchargez la version simplifiée (elles comportent moins de colonnes) de ces données au lien suivant:
<a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places_simple.zip">http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places_simple.zip</a></p>
<p>Par soucis de simplicité, les deux jeux de données sont téléchargeables directement aux liens ci-dessous:</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/signif.txt">signif.txt</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ne_10m_populated_places_simple.zip">ne_10m_populated_places_simple.zip</a></p>
<p>Data Sources: <a class="reference internal" href="credits.html#ngdc" id="id1">[NGDC]</a> <a class="reference internal" href="credits.html#naturalearth" id="id2">[NATURALEARTH]</a></p>
</div>
<div class="section" id="procedure">
<h2>Procédure<a class="headerlink" href="#procedure" title="Lien permanent vers ce titre">¶</a></h2>
<ol class="arabic simple">
<li>Open <span class="menuselection">Layer ‣ Add Layer ‣ Add Delimited Text Layer</span> and
browse to the downloaded <code class="docutils literal"><span class="pre">signif.txt</span></code> file.</li>
</ol>
<img alt="../_images/1128.png" class="align-center" src="../_images/1128.png" />
<ol class="arabic simple" start="2">
<li>Since this is a <em>tab-delimited file</em>, choose <span class="guilabel">Tab</span> as the
<span class="guilabel">File format</span>. The <span class="guilabel">X field</span> and <span class="guilabel">Y field</span>
would be auto-populated. Click <span class="guilabel">OK</span>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may see some error messages as QGIS tries to import the file. These are
valid errors and some rows from the file will not be imported. You can ignore
the errors for the purpose of this tutorial.</p>
</div>
<img alt="../_images/280.png" class="align-center" src="../_images/280.png" />
<ol class="arabic simple" start="3">
<li>As the earthquake dataset has Latitude/Longitude coordinates, it will be
imported with the default CRS of <code class="docutils literal"><span class="pre">EPSG:</span> <span class="pre">4326</span></code>. Verify that is the case in
the bottom-right corner. Let&#8217;s also open the Populated Places layer. Go to
<span class="menuselection">Layer ‣ Add Layer ‣ Add Vector Layer</span>.</li>
</ol>
<img alt="../_images/350.png" class="align-center" src="../_images/350.png" />
<ol class="arabic simple" start="4">
<li>Browse to the downloaded <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple.zip</span></code> file and
click <span class="guilabel">Open</span>.</li>
</ol>
<img alt="../_images/428.png" class="align-center" src="../_images/428.png" />
<ol class="arabic simple" start="5">
<li>Zoom around and explore both the datasets. Each purple point represents the
location of a significant earthquake and each blue point represents the
location of a populated place. We need a way to find out the nearest point
from the populated places layer for each of the points in the earthquake
layer.</li>
</ol>
<img alt="../_images/528.png" class="align-center" src="../_images/528.png" />
<ol class="arabic simple" start="6">
<li>Go to <span class="menuselection">Vector ‣ Analysis Tools ‣ Distance Matrix</span>.</li>
</ol>
<img alt="../_images/626.png" class="align-center" src="../_images/626.png" />
<ol class="arabic simple" start="7">
<li>Here select the earthquake layer <code class="docutils literal"><span class="pre">signif</span></code> as the Input point layer and the
populated places <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple</span></code> as the target layer. You
also need to select a unique field from each of these layers which is how
your results will be displayed. In this analysis, we are looking to get only
<code class="docutils literal"><span class="pre">1</span></code> nearest point, so check the <span class="guilabel">Use only the nearest(k) target
points</span>, and enter <span class="guilabel">1</span>. Name your output file <code class="docutils literal"><span class="pre">matrix.csv</span></code>, and
click OK.  Once the processing finishes, click <span class="guilabel">Close</span>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A useful thing to note is that you can even perform the analysis with only 1
layer. Select the same layer as both Input and Target. The result would be a
nearest neighbor from the same layer instead of a different layer as we have
used here.</p>
</div>
<img alt="../_images/725.png" class="align-center" src="../_images/725.png" />
<ol class="arabic simple" start="8">
<li>Once the processing finishes, click the <span class="guilabel">Close</span> button in the
<span class="guilabel">Distance Matrix</span> dialog. You can now view the <code class="docutils literal"><span class="pre">matrix.csv</span></code> file
in Notepad or any text editor.  QGIS can import CSV files as well, so we
will add it to QGIS and view it there. Go to <span class="menuselection">Layer ‣ Add
Layer ‣ Add Delimited Text Layer...</span>.</li>
</ol>
<img alt="../_images/824.png" class="align-center" src="../_images/824.png" />
<ol class="arabic simple" start="9">
<li>Browse to the newly created <code class="docutils literal"><span class="pre">matrix.csv</span></code> file. Since this file is just
text columns, select <span class="guilabel">No geometry (attribute only table)</span> as the
<span class="guilabel">Geometry definition</span>. Click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/923.png" class="align-center" src="../_images/923.png" />
<ol class="arabic simple" start="10">
<li>You will see the CSV file loaded as a table. Right-click on the table layer
and select <span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/1023.png" class="align-center" src="../_images/1023.png" />
<ol class="arabic simple" start="11">
<li>Now you will be able to see the content of our results. The
<span class="guilabel">InputID</span> field contains the field name from the Earthquake
layer. The <span class="guilabel">TargetID</span> field contains the name of the feature from
the Populated Places layer that was the closest to the earthquake point.
The <span class="guilabel">Distance</span> field is the distance between the 2 points.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember that the <em>distance</em> calculation will be done using the layers&#8217;
Coordinate Reference System. Here the distance will be in <em>decimal degrees</em>
units because our source layer coordinates are in degrees. If you want
distance in meters, reproject the layers before running the tool.</p>
</div>
<img alt="../_images/1129.png" class="align-center" src="../_images/1129.png" />
<ol class="arabic simple" start="12">
<li>This is very close to the result we were looking for. For some users, this
table would be sufficient. However, we can also integrate this results in
our original Earthquake layer using a <strong>Table Join</strong>. Right-click on the
Earthquake layer, and select <span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/1225.png" class="align-center" src="../_images/1225.png" />
<ol class="arabic simple" start="13">
<li>Go to the <span class="guilabel">Joins</span> tab and click on the <span class="guilabel">+</span> button.</li>
</ol>
<img alt="../_images/1422.png" class="align-center" src="../_images/1422.png" />
<ol class="arabic simple" start="14">
<li>We want to join the data from our analysis result to this layer. We need to
select a field from each of the layers that has the same values. Select
<code class="docutils literal"><span class="pre">matrix</span></code> as the <span class="guilabel">Join layer`</span> and <code class="docutils literal"><span class="pre">InputID</span></code> as the
<span class="guilabel">Join field</span>. The <span class="guilabel">Target field</span> would be <code class="docutils literal"><span class="pre">I_D</span></code>.
Leave other options to their default values and click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1422.png" class="align-center" src="../_images/1422.png" />
<ol class="arabic simple" start="15">
<li>You will see the join appear in the <span class="guilabel">Joins</span> tab. Click
<span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1521.png" class="align-center" src="../_images/1521.png" />
<ol class="arabic simple" start="16">
<li>Now open the attribute table of the <code class="docutils literal"><span class="pre">signif</span></code> layer by right-clicking and
selecting <span class="guilabel">Open Attribute Table</span>.</li>
</ol>
<img alt="../_images/1619.png" class="align-center" src="../_images/1619.png" />
<ol class="arabic simple" start="17">
<li>You will see that for every Earthquake feature, we now have an attribute
which is the nearest neighbor (closest populated place) and the distance to
the nearest neighbor.</li>
</ol>
<img alt="../_images/1718.png" class="align-center" src="../_images/1718.png" />
<ol class="arabic simple" start="18">
<li>We will now explore a way to visualize these results. First, we need to
make the table join permanent by saving it to a new layer. Right-click the
<code class="docutils literal"><span class="pre">signif</span></code> layer and select <span class="guilabel">Save As...</span>.</li>
</ol>
<img alt="../_images/1819.png" class="align-center" src="../_images/1819.png" />
<ol class="arabic simple" start="19">
<li>Click the <span class="guilabel">Browse</span> button next to <span class="guilabel">Save as</span> label and
name the output layer as <code class="docutils literal"><span class="pre">earthquake_with_places.shp</span></code>. Make sure the
<span class="guilabel">Add saved file to map</span> box is checked and click <span class="guilabel">OK</span>.</li>
</ol>
<img alt="../_images/1916.png" class="align-center" src="../_images/1916.png" />
<ol class="arabic simple" start="20">
<li>Once the new layer is loaded, you can turn off the visibility of the
<code class="docutils literal"><span class="pre">signif</span></code> layer. As our dataset is quite large, we can run our
visualization analysis on a subset of the data. QGIS has a neat feature
where you can load a subset of features from a layer without having to
export it to a new layer. Right-click the <code class="docutils literal"><span class="pre">earthquake_with_places</span></code> layer
and select <span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/2012.png" class="align-center" src="../_images/2012.png" />
<ol class="arabic simple" start="21">
<li>In the <span class="guilabel">General</span> tab, scroll down to the <span class="guilabel">Feature
subset</span> section. Click <span class="guilabel">Query Builder</span>.</li>
</ol>
<img alt="../_images/2117.png" class="align-center" src="../_images/2117.png" />
<ol class="arabic simple" start="22">
<li>For this tutorial, we will visualize the earthquakes and their nearest
populated places for Mexico. Enter the following expression in the
<span class="guilabel">Query Builder</span> dialog.</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre><span></span>&quot;COUNTRY&quot; = &#39;MEXICO&#39;
</pre></div>
</div>
<img alt="../_images/2215.png" class="align-center" src="../_images/2215.png" />
<ol class="arabic simple" start="23">
<li>You will see that only the points falling within Mexico will be visible in
the canvas. Let&#8217;s do the same for the populated places layer. Right-click
on the <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple</span></code> layer and select
<span class="guilabel">Properties</span>.</li>
</ol>
<img alt="../_images/2314.png" class="align-center" src="../_images/2314.png" />
<ol class="arabic simple" start="24">
<li>Open the <span class="guilabel">Query Builder</span> dialog from the <span class="guilabel">General</span> tab.
Enter the following expression.</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre><span></span>&quot;adm0name&quot; = &#39;Mexico&#39;
</pre></div>
</div>
<img alt="../_images/2413.png" class="align-center" src="../_images/2413.png" />
<ol class="arabic simple" start="25">
<li>Now we are ready to create our visualization. We will use a plugin named
<code class="docutils literal"><span class="pre">MMQGIS</span></code>. Find and install the plugin. See <a class="reference internal" href="using_plugins.html"><em>Using Plugins</em></a> for more
details on how to work with plugins. Once you have the plugin installed, go
to <span class="menuselection">MMQGIS ‣ Create ‣ Hub Lines</span>.</li>
</ol>
<img alt="../_images/2512.png" class="align-center" src="../_images/2512.png" />
<ol class="arabic simple" start="26">
<li>Select <code class="docutils literal"><span class="pre">ne_10m_populated_places_simple</span></code> as the <span class="guilabel">Hub Point
Layer</span> and <code class="docutils literal"><span class="pre">name</span></code> as the <span class="guilabel">Hub ID Attribute</span>. Similarly, select
<code class="docutils literal"><span class="pre">earthquake_with_places</span></code> as the <span class="guilabel">Spoke Point Layer</span> and
<code class="docutils literal"><span class="pre">matrix_Tar</span></code> as the <span class="guilabel">Spoke Hub ID Attribute</span>. The hub lines
algorithm will go through each of earthquake points and create a line that
will join it to the populated place which matches the attribute we
specified. Click <span class="guilabel">Browse</span> and name the <span class="guilabel">Output
Shapefile</span> as <code class="docutils literal"><span class="pre">earthquake_hub_lines.shp</span></code>. Click <span class="guilabel">OK</span> to start
the processing.</li>
</ol>
<img alt="../_images/2612.png" class="align-center" src="../_images/2612.png" />
<ol class="arabic simple" start="27">
<li>The processing may take a few minutes. You can see the progress on the
bottom-left corner of the QGIS window.</li>
</ol>
<img alt="../_images/2711.png" class="align-center" src="../_images/2711.png" />
<ol class="arabic simple" start="28">
<li>Once the processing is done, you will see the <code class="docutils literal"><span class="pre">earthquake_hub_lines</span></code>
layer loaded in QGIS. You can see that each earthquake point now has a line
that connects it to the nearest populated place.</li>
</ol>
<img alt="../_images/288.png" class="align-center" src="../_images/288.png" />
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Ujaval Gandhi.<br/>
      Mis à jour le Apr 13, 2019.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/nearest_neighbor_analysis.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>