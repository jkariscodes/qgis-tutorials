<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Rularea și programarea Activităților de Prelucrare QGIS &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../index.html" />
    <link rel="next" title="Găsirea Poligoanelor Învecinate Dintr-un Strat" href="find_neighbor_polygons.html" />
    <link rel="prev" title="Scriptare în Python pentru Cadrul de Procesare" href="processing_python_scripts.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-690672-13', 'qgistutorials.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introducere</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Crearea unei Hărți</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Lucrul cu Atribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importul Foilor de Calcul sau a Fișierelor CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Utilizarea Plugin-urilor</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Căutarea și descărcarea datelor OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Noțiuni de bază despre stilizarea vectorilor</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Determinarea Lungimii Liniilor și a Statisticilor</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Noțiuni de Bază despre Analiza și Stilizarea Rasterelor</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mozaicarea și Tăierea Rasterelor</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Lucrul cu date despre teren</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Lucrul cu Date WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Lucrul cu Proiecții</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferențierea Foilor Topografice și a Hărților Scanate</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferențierea Imaginilor Aeriene</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizarea datelor provenite din hărți</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Unificarea tabelelor</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realizarea uniunilor spațiale</a></li>
<li class="toctree-l1"><a class="reference internal" href="points_in_polygon.html">Analiza Punctelor dintr-un Poligon</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Crearea hărților calorice</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Efectuarea Interogărilor Spațiale</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Analiza Celui Mai Apropiat Vecin</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Eșantionarea datelor raster, folosind puncte sau poligoane</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolarea Datelor de tip Punct</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Procesarea în serie, folosind cadrul de procesare</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automatizarea Fluxurilor de Lucru Complexe utilizând Modelatorul de Procese</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatizarea Creării Hărților cu ajutorul Atlasului Compozitorului de Hărți</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_qgis_browser.html">Utilizarea QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="counting_vertices.html">Aflarea numărului de noduri dintr-un strat</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_bil_bip_bsq_files.html">Fișierele Open BIL, BIP sau BSQ în QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Noțiuni de bază despre programarea în Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Construirea unui Plugin Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Utilizarea Funcțiilor pentru Expresiile Python Personalizate</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Scriptare în Python pentru Cadrul de Procesare</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Rularea și programarea Activităților de Prelucrare QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_neighbor_polygons.html">Găsirea Poligoanelor Învecinate Dintr-un Strat</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins_pyqgis.html">Realizarea Uniunii Tabelelor (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Maparea Web cu ajutorul QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Crearea hărților de bază folosind QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Resurse de învățare QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Creditare date</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="processing_python_scripts.html" title="Previous Chapter: Scriptare în Python pentru Cadrul de Procesare"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Scriptare în Pyt...</span>
    </a>
  </li>
  <li>
    <a href="find_neighbor_polygons.html" title="Next Chapter: Găsirea Poligoanelor Învecinate Dintr-un Strat"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Găsirea Poligoan... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>

<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>



  


<h4>Share</h4>
<div class="addthis_sharing_toolbox"></div>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="running-and-scheduling-qgis-processing-jobs">
<h1>Rularea și programarea Activităților de Prelucrare QGIS<a class="headerlink" href="#running-and-scheduling-qgis-processing-jobs" title="Permalink to this headline">¶</a></h1>
<p>Puteți automatiza o mulțime de sarcini în QGIS folosind scriptarea Python (PyQGIS) și cadrul de Procesare. De cele mai multe ori, veți rula manual aceste scripturi, atât timp cât este deschis QGIS. Deși acest lucru este util, de multe ori e nevoie de o modalitate de a rula aceste activități prin intermediul liniei de comandă, fără a fi nevoie de deschiderea QGIS. Din fericire, puteți scrie scripturi python de sine stătătoare, care folosesc bibliotecile QGIS, și care pot fi rulate prin intermediul liniei de comandă. In acest tutorial, vom învăța cum să scriem și să programăm o acțiune care utilizează cadrul de Procesare din QGIS.</p>
<div class="section" id="overview-of-the-task">
<h2>Privire de ansamblu asupra activității<a class="headerlink" href="#overview-of-the-task" title="Permalink to this headline">¶</a></h2>
<p>Să spunem că lucrăm la unele analize folosind fișierele shape ale unei regiuni. Fișierele shape sunt actualizate zilnic și avem nevoie întotdeauna cel mai recent fișier. Dar înainte de a putea folosi aceste fișiere, trebuie să efectuăm o curățare a datelor. Putem seta o acțiune QGIS care automatizează acest proces, și care rulează zilnic, astfel încât să aveți ultimele fișiere shape curățate. Vom scrie un script Python de sine stătător, care descarcă un fișier shape și rulează operațiuni de curățare topologică o dată pe zi.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Alte competențe pe care le veți dobândi<a class="headerlink" href="#other-skills-you-will-learn" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="first">Descărcarea și dezarhivarea fișierelor folosind Python.</p>
</li>
<li><p class="first">Rularea oricărui algoritm de prelucrare prin PyQGIS.</p>
</li>
<li><p class="first">Repararea erorilor topologice dintr-un strat vectorial.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Obținerea datelor<a class="headerlink" href="#get-the-data" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://www.geofabrik.de/">Geofabrik</a> furnizează zilnic seturi de date conținând fișiere shape actualizate ale <a class="reference external" href="http://www.openstreetmap.org/">OpenStreetMap</a>.</p>
<p>Vom folosi <a class="reference external" href="http://download.geofabrik.de/australia-oceania.html">fișierele shape pentru Fiji</a> în cadrul acestui exercițiu. Descărcați <a class="reference external" href="http://download.geofabrik.de/australia-oceania/fiji-latest.shp.zip">fiji-latest.shp.zip</a> și dezarhivați-l într-un dosar de pe discul dvs.</p>
<p>Sursa de date <a class="reference internal" href="credits.html#geofabrik" id="id1">[GEOFABRIK]</a></p>
</div>
<div class="section" id="procedure">
<h2>Procedura<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">Vom trece mai întâi prin procesul manual de curățare a fișierului shape, pentru a nota comenzile pe care le vom folosi în scriptul python. Lansați QGIS și mergeți la <span class="menuselection">Strat ‣ Adăugare Strat ‣ Adăugare Strat Vectorial</span>.</p>
</li>
</ol>
<img alt="../_images/1129.png" class="align-center" src="../_images/1129.png" />
<ol class="arabic simple" start="2">
<li><p class="first">Navigați la folderul care conține fișierele shape dezarhivate, apoi selectați fișierul <code class="docutils literal"><span class="pre">roads.shp</span></code> și faceți clic pe <span class="guilabel">Open</span>.</p>
</li>
</ol>
<img alt="../_images/270.png" class="align-center" src="../_images/270.png" />
<ol class="arabic simple" start="3">
<li><p class="first">În primul rând trebuie să reproiectăm stratul drumurilor, folosind un CRS Proiectat. Aceasta ne va permite să folosim ca unități <em>metrii</em> în locul gradelor, atunci când se va efectua o analiză. Deschideți <span class="menuselection">Procesare ‣ Instrumentar</span>.</p>
</li>
</ol>
<img alt="../_images/339.png" class="align-center" src="../_images/339.png" />
<ol class="arabic simple" start="4">
<li><p class="first">Căutați instrumentul <span class="guilabel">Reproiectare strat</span>. Faceți dublu clic pe el pentru a lansa dialogul.</p>
</li>
</ol>
<img alt="../_images/429.png" class="align-center" src="../_images/429.png" />
<ol class="arabic simple" start="5">
<li><p class="first">În dialogul <span class="guilabel">Reproiectare strat</span>, folosiți stratul <code class="docutils literal"><span class="pre">roads</span></code> ca <span class="guilabel">Strat de intrare</span>. Vom folosi CRS-ul <code class="docutils literal"><span class="pre">EPSG:3460</span> <span class="pre">Fiji</span> <span class="pre">1986</span> <span class="pre">/</span> <span class="pre">Fiji</span> <span class="pre">Map</span> <span class="pre">Grid</span></code> ca <span class="guilabel">CRS Destinație</span>. Clic pe <span class="guilabel">Rulează</span>.</p>
</li>
</ol>
<img alt="../_images/530.png" class="align-center" src="../_images/530.png" />
<ol class="arabic simple" start="6">
<li><p class="first">O dată ce procesul s-a încheiat, stratul reproiectat se va încărca în QGIS. Mergeți la <span class="menuselection">Procesare ‣ Istoric și Jurnal..</span>.</p>
</li>
</ol>
<img alt="../_images/628.png" class="align-center" src="../_images/628.png" />
<ol class="arabic simple" start="7">
<li><p class="first">În dialogul <span class="guilabel">Istoric și Jurnal</span>, expandați folderul <span class="guilabel">Algoritm</span> și selectați ultima intrare. Veți vedea comanda completă de procesare afișată în panoul de jos. Notați această comandă, pentru a o utiliza în script-ul nostru.</p>
</li>
</ol>
<img alt="../_images/727.png" class="align-center" src="../_images/727.png" />
<ol class="arabic simple" start="8">
<li><p class="first">Înapoi în fereastra principală a QGIS, faceți clic pe butonul <span class="guilabel">CRS</span> din colțul din dreapta-jos.</p>
</li>
</ol>
<img alt="../_images/826.png" class="align-center" src="../_images/826.png" />
<ol class="arabic simple" start="9">
<li><p class="first">În dialogul <span class="guilabel">Proprietățile Proiectului | CRS</span>, bifați <span class="guilabel">Activează transformarea din zbor a CRS-ului</span>, apoi selectați <code class="docutils literal"><span class="pre">EPSG:3460</span> <span class="pre">Fiji</span> <span class="pre">1986</span> <span class="pre">/</span> <span class="pre">Fiji</span> <span class="pre">Map</span> <span class="pre">Grid</span></code> ca CRS. Acest lucru vă asigură că straturile noastre originale și cele reproiectate se vor alinia corect.</p>
</li>
</ol>
<img alt="../_images/924.png" class="align-center" src="../_images/924.png" />
<ol class="arabic simple" start="10">
<li><p class="first">Acum, vom rula operația de curățare. GRASS având un set foarte puternic de instrumente de curățare topologică. Acestea sunt disponibile în QGIS prin algoritmul <code class="docutils literal"><span class="pre">v.clean</span></code>. Căutați acest algoritm în <span class="guilabel">Instrumentarul de Procesare</span>, apoi faceți dublu clic pe el pentru a lansa dialogul.</p>
</li>
</ol>
<img alt="../_images/1025.png" class="align-center" src="../_images/1025.png" />
<ol class="arabic simple" start="11">
<li><p class="first">Puteți citi despre mai multe instrumente diferite și despre opțiunile acestora în fila <span class="guilabel">Ajutor</span>. Pentru acest tutorial, vom folosi instrumentul <code class="docutils literal"><span class="pre">snap</span></code> pentru a elimina vertexurile duplicate, care se află cel mult la 1 metru unul față de celălalt. Selectați <code class="docutils literal"><span class="pre">Stratul</span> <span class="pre">reproiectat</span></code> ca <span class="guilabel">Stratul de curățat</span>. Alegeți <code class="docutils literal"><span class="pre">snap</span></code> ca <span class="guilabel">Instrument de curățare</span>. Introduceți <code class="docutils literal"><span class="pre">1.00</span></code> ca <span class="guilabel">Prag</span>. Lăsați celelalte câmpuri goale și faceți clic pe <span class="guilabel">Rulează</span>.</p>
</li>
</ol>
<img alt="../_images/1130.png" class="align-center" src="../_images/1130.png" />
<ol class="arabic simple" start="12">
<li><p class="first">După ce termină prelucrarea, veți vedea 2 straturi noi adăugate în QGIS. <code class="docutils literal"><span class="pre">Stratul</span> <span class="pre">vectorial</span> <span class="pre">curățat</span></code> este stratul cu erori topologice corectate. Veți avea, de asemenea, un <code class="docutils literal"><span class="pre">Strat</span> <span class="pre">cu</span> <span class="pre">erori</span></code> care va evidenția entitățile care au fost reparate. Puteți utiliza stratul erorilor ca un ghid și să-l măriți, pentru a vedea vertexurile care au fost eliminate.</p>
</li>
</ol>
<img alt="../_images/1226.png" class="align-center" src="../_images/1226.png" />
<ol class="arabic simple" start="13">
<li><p class="first">Mergeți în dialogul <span class="menuselection">Procesare ‣ Istoric și Jurnal</span> și notați comanda de procesare completă, pentru o utilizare ulterioară.</p>
</li>
</ol>
<img alt="../_images/1323.png" class="align-center" src="../_images/1323.png" />
<ol class="arabic simple" start="14">
<li><p class="first">Acum suntem gata să începem codificarea. Vedeți secțiunea unui <strong>Editor de Text sau IDE Python</strong> în tutorialul <a class="reference internal" href="building_a_python_plugin.html"><em>Construirea unui Plugin Python</em></a> pentru instrucțiunile de instalare. Pentru rularea script-urilor python standalone, care utilizează QGIS, trebuie să setați diverse opțiuni de configurare. O modalitate bună de a rula scripturi independente este de a le lansa printr-un fișier <code class="docutils literal"><span class="pre">.bat</span></code>. Acest fișier va stabili mai întâi opțiunile de configurare corecte, apoi va apela script-ul python. Creați un nou fișier numit <code class="docutils literal"><span class="pre">launch.bat</span></code> și introduceți textul următor. Modificați valorile în funcție de configurația QGIS. Nu uitați să înlocuiți numele de utilizator cu al dvs. în calea către script-ul python. Căile din acest fișier vor fi similare pe sistemul dumneavoastră, cu acelea ale QGIS, dacă l-ați instalat prin <code class="docutils literal"><span class="pre">Programul</span> <span class="pre">de</span> <span class="pre">instalare</span> <span class="pre">OSGeo4W</span></code>. Salvați fișierul pe desktop.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Utilizatorii de Linux și Mac trebuie să creeze un script pentru linia de comandă, în scopul stabilirii căilor și variabilelor de mediu.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>REM Change OSGEO4W_ROOT to point to the base install folder
SET OSGEO4W_ROOT=C:\OSGeo4W64
SET QGISNAME=qgis
SET QGIS=%OSGEO4W_ROOT%\apps\%QGISNAME%
set QGIS_PREFIX_PATH=%QGIS%
REM Gdal Setup
set GDAL_DATA=%OSGEO4W_ROOT%\share\gdal\
REM Python Setup
set PATH=%OSGEO4W_ROOT%\bin;%QGIS%\bin;%PATH%
SET PYTHONHOME=%OSGEO4W_ROOT%\apps\Python27
set PYTHONPATH=%QGIS%\python;%PYTHONPATH%

REM Launch python job
python c:\Users\Ujaval\Desktop\download_and_clean.py
pause
</pre></div>
</div>
<img alt="../_images/1422.png" class="align-center" src="../_images/1422.png" />
<ol class="arabic simple" start="15">
<li><p class="first">Creați un nou fișier python și introduceți următorul cod. Denumiți fișierul ca <code class="docutils literal"><span class="pre">download_and_clean.py</span></code>, apoi salvați-l pe desktop.</p>
</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">print</span> <span class="s">&#39;Hello QGIS!&#39;</span>
</pre></div>
</div>
<img alt="../_images/1521.png" class="align-center" src="../_images/1521.png" />
<ol class="arabic simple" start="16">
<li><p class="first">Comutați la Desktop-ul dvs. și localizați pictograma <code class="docutils literal"><span class="pre">launch.bat</span></code>. Faceți dublu clic pe el pentru a lansa o nouă fereastră de comandă și rulați scriptul. Dacă vedeți <code class="docutils literal"><span class="pre">Hello</span> <span class="pre">QGIS!</span></code> afișat în fereastra de comandă, instalarea și configurarea au fost corecte. Dacă vedeți erori sau nu vedeți textul, verificați fișierul <code class="docutils literal"><span class="pre">launch.bat</span></code> și asigurați-vă că toate căile se potrivesc cu locațiile de pe sistemul dumneavoastră.</p>
</li>
</ol>
<img alt="../_images/1620.png" class="align-center" src="../_images/1620.png" />
<ol class="arabic simple" start="17">
<li><p class="first">Înapoi în editorul de text, modificați scriptul <code class="docutils literal"><span class="pre">download_and_clean.py</span></code> și adăugați următorul cod. Acesta este codul bootstrap de inițializare a QGIS. El este inutil dacă scriptul se execută din interiorul QGIS. Dar din moment ce îl executăm din afară, este necesar să-l adăugăm la început. Asigurați-vă că înlocuiți numele de utilizator cu al dvs. După efectuarea acestor modificări, salvați din nou fișierul, apoi rulați <code class="docutils literal"><span class="pre">launch.bat</span></code>. Dacă apare afișat <code class="docutils literal"><span class="pre">Hello</span> <span class="pre">QGIS!</span></code>, sunteți gata să adăugați logica de procesare a script-ului.</p>
</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Initialize QGIS Application</span>
<span class="n">QgsApplication</span><span class="o">.</span><span class="n">setPrefixPath</span><span class="p">(</span><span class="s">&quot;C:</span><span class="se">\\</span><span class="s">OSGeo4W64</span><span class="se">\\</span><span class="s">apps</span><span class="se">\\</span><span class="s">qgis&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">QgsApplication</span><span class="p">([],</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">QgsApplication</span><span class="o">.</span><span class="n">initQgis</span><span class="p">()</span>

<span class="c"># Add the path to Processing framework</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;c:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">Ujaval</span><span class="se">\\</span><span class="s">.qgis2</span><span class="se">\\</span><span class="s">python</span><span class="se">\\</span><span class="s">plugins&#39;</span><span class="p">)</span>

<span class="c"># Import and initialize Processing framework</span>
<span class="kn">from</span> <span class="nn">processing.core.Processing</span> <span class="kn">import</span> <span class="n">Processing</span>
<span class="n">Processing</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">processing</span>

<span class="k">print</span> <span class="s">&#39;Hello QGIS!&#39;</span>
</pre></div>
</div>
<img alt="../_images/1719.png" class="align-center" src="../_images/1719.png" />
<ol class="arabic simple" start="18">
<li><p class="first">Reveniți la prima comandă de prelucrare pe care am salvat-o în jurnal. Aceasta a fost comanda de reproiectare a unui strat. Lipiți comanda pentru script și adăugați codul înconjurător, după cum urmează. Așa cum se observă, comenzile de prelucrare returnează calea către straturile de ieșire sub formă de dicționar. Această valoare este stocată ca <code class="docutils literal"><span class="pre">ret</span></code> și afișează calea către stratul reproiectat.</p>
</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">roads_shp_path</span> <span class="o">=</span> <span class="s">&quot;C:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">Ujaval</span><span class="se">\\</span><span class="s">Downloads</span><span class="se">\\</span><span class="s">fiji-latest.shp</span><span class="se">\\</span><span class="s">roads.shp&quot;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">runalg</span><span class="p">(</span><span class="s">&#39;qgis:reprojectlayer&#39;</span><span class="p">,</span> <span class="n">roads_shp_path</span><span class="p">,</span> <span class="s">&#39;EPSG:3460&#39;</span><span class="p">,</span>
<span class="bp">None</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;OUTPUT&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">output</span>
</pre></div>
</div>
<img alt="../_images/1819.png" class="align-center" src="../_images/1819.png" />
<ol class="arabic simple" start="19">
<li><p class="first">Rulați scriptul, cu ajutorul <code class="docutils literal"><span class="pre">launch.bat</span></code>, apoi veți vedea calea către noul strat reproiectat creat.</p>
</li>
</ol>
<img alt="../_images/1917.png" class="align-center" src="../_images/1917.png" />
<ol class="arabic simple" start="20">
<li><p class="first">Acum adăugați codul pentru curățarea topologică. Deoarece acesta este rezultatul nostru final, vom adăuga căile fișierului de ieșire, ca ultimele 2 argumente pentru algoritmul <code class="docutils literal"><span class="pre">grass.v.clean</span></code>. Dacă nu le completați, rezultatul va fi creat într-un director temporar.</p>
</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">processing</span><span class="o">.</span><span class="n">runalg</span><span class="p">(</span><span class="s">&quot;grass:v.clean&quot;</span><span class="p">,</span>
                  <span class="n">output</span><span class="p">,</span>
                  <span class="mi">1</span><span class="p">,</span>
                  <span class="mi">1</span><span class="p">,</span>
                  <span class="bp">None</span><span class="p">,</span>
                  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                  <span class="mf">0.0001</span><span class="p">,</span>
                  <span class="s">&#39;C:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">Ujaval</span><span class="se">\\</span><span class="s">Desktop</span><span class="se">\\</span><span class="s">clean.shp&#39;</span><span class="p">,</span>
                  <span class="s">&#39;C:\Users</span><span class="se">\\</span><span class="s">Ujaval</span><span class="se">\\</span><span class="s">Desktop</span><span class="se">\\</span><span class="s">errors.shp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/2014.png" class="align-center" src="../_images/2014.png" />
<ol class="arabic simple" start="21">
<li><p class="first">Rulați scriptul și veți vedea 2 fișiere shape nou create pe desktop. Acesta completează partea de procesare a script-ului. Haideți să adăugăm codul pentru a descărca datele de pe site-ul original, și să-l dezarhivăm în mod automat. Vom stoca, de asemenea, calea către fișierul dezarhivat într-o variabilă pe care o putem transmite algoritmului de procesare ulterioară. Va trebui să importăm unele module suplimentare pentru a face acest lucru. (Vedeți sfârșitul tutorialului pentru script-ul complet, cu toate modificările)</p>
</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">tempfile</span>

<span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
<span class="n">download_url</span> <span class="o">=</span> <span class="s">&#39;http://download.geofabrik.de/australia-oceania/fiji-latest.shp.zip&#39;</span>
<span class="k">print</span> <span class="s">&#39;Downloading file&#39;</span>
<span class="nb">zip</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">download_url</span><span class="p">)</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="nb">zip</span><span class="p">)</span> <span class="k">as</span> <span class="n">zf</span><span class="p">:</span>
    <span class="n">files</span> <span class="o">=</span> <span class="n">zf</span><span class="o">.</span><span class="n">namelist</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="s">&#39;roads&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">zf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="o">==</span> <span class="s">&#39;roads.shp&#39;</span><span class="p">:</span>
                <span class="n">roads_shp_path</span> <span class="o">=</span> <span class="n">file_path</span>
</pre></div>
</div>
<img alt="../_images/2118.png" class="align-center" src="../_images/2118.png" />
<ol class="arabic simple" start="22">
<li><p class="first">Rulați scriptul finalizat. De fiecare dată când rulați scriptul, o copie proaspătă a datelor va fi descărcată și procesată.</p>
</li>
</ol>
<img alt="../_images/2217.png" class="align-center" src="../_images/2217.png" />
<ol class="arabic simple" start="23">
<li><p class="first">Pentru a automatiza rularea acestui script pe o bază zilnică, putem folosi <code class="docutils literal"><span class="pre">Programatorul</span> <span class="pre">de</span> <span class="pre">Sarcini</span></code> din Windows. Lansați Programatorul de Sarcini și faceți clic pe <span class="guilabel">Creează o Acțiune de Bază</span>.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Utilizatorii de Linux și Mac pot folosi acțiuni cron pentru programarea sarcinilor.</p>
</div>
<img alt="../_images/2314.png" class="align-center" src="../_images/2314.png" />
<ol class="arabic simple" start="24">
<li><p class="first">Denumiți sarcina &#8220;Descărcare zilnică și Curățare&#8221;, apoi faceți clic pe <span class="guilabel">Next</span>.</p>
</li>
</ol>
<img alt="../_images/2412.png" class="align-center" src="../_images/2412.png" />
<ol class="arabic simple" start="25">
<li><p class="first">Selectați <code class="docutils literal"><span class="pre">Zilnic</span></code> ca <span class="guilabel">Declanșator</span>, apoi faceți clic pe <span class="guilabel">Next</span></p>
</li>
</ol>
<img alt="../_images/2511.png" class="align-center" src="../_images/2511.png" />
<ol class="arabic simple" start="26">
<li><p class="first">Selectați o dată pe placul dumneavoastră, apoi faceți clic pe <span class="guilabel">Next</span>.</p>
</li>
</ol>
<img alt="../_images/2610.png" class="align-center" src="../_images/2610.png" />
<ol class="arabic simple" start="27">
<li><p class="first">Selectați <code class="docutils literal"><span class="pre">Rulează</span> <span class="pre">un</span> <span class="pre">program</span></code> ca <span class="guilabel">Intrare</span>, apoi efectuați clic pe <span class="guilabel">Next</span>.</p>
</li>
</ol>
<img alt="../_images/278.png" class="align-center" src="../_images/278.png" />
<ol class="arabic simple" start="28">
<li><p class="first">Clic pe <span class="guilabel">Răsfoire</span> și localizați scriptul <code class="docutils literal"><span class="pre">launch.bat</span></code>. Clic <span class="guilabel">Next</span>.</p>
</li>
</ol>
<img alt="../_images/286.png" class="align-center" src="../_images/286.png" />
<ol class="arabic simple" start="29">
<li><p class="first">Faceți clic pe <span class="guilabel">Finish</span> din ultimul ecran, pentru a planifica sarcina. Acum, scriptul se va lansa automat la ora specificată, pentru a vă oferi zilnic o copie recentă și curată a datelor.</p>
</li>
</ol>
<img alt="../_images/295.png" class="align-center" src="../_images/295.png" />
<p>Mai jos este scriptul <code class="docutils literal"><span class="pre">download_and_clean.py</span></code>, pentru referința dvs.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">tempfile</span>

<span class="c"># Initialize QGIS Application</span>
<span class="n">QgsApplication</span><span class="o">.</span><span class="n">setPrefixPath</span><span class="p">(</span><span class="s">&quot;C:</span><span class="se">\\</span><span class="s">OSGeo4W64</span><span class="se">\\</span><span class="s">apps</span><span class="se">\\</span><span class="s">qgis&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">QgsApplication</span><span class="p">([],</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">QgsApplication</span><span class="o">.</span><span class="n">initQgis</span><span class="p">()</span>

<span class="c"># Add the path to Processing framework  </span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;c:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">Ujaval</span><span class="se">\\</span><span class="s">.qgis2</span><span class="se">\\</span><span class="s">python</span><span class="se">\\</span><span class="s">plugins&#39;</span><span class="p">)</span>

<span class="c"># Import and initialize Processing framework</span>
<span class="kn">from</span> <span class="nn">processing.core.Processing</span> <span class="kn">import</span> <span class="n">Processing</span>
<span class="n">Processing</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">processing</span>

<span class="c"># Download and unzip the latest shapefile</span>
<span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
<span class="n">download_url</span> <span class="o">=</span> <span class="s">&#39;http://download.geofabrik.de/australia-oceania/fiji-latest.shp.zip&#39;</span>
<span class="k">print</span> <span class="s">&#39;Downloading file&#39;</span>
<span class="nb">zip</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">download_url</span><span class="p">)</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="nb">zip</span><span class="p">)</span> <span class="k">as</span> <span class="n">zf</span><span class="p">:</span>
    <span class="n">files</span> <span class="o">=</span> <span class="n">zf</span><span class="o">.</span><span class="n">namelist</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="s">&#39;roads&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">zf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="o">==</span> <span class="s">&#39;roads.shp&#39;</span><span class="p">:</span>
                <span class="n">roads_shp_path</span> <span class="o">=</span> <span class="n">file_path</span>

<span class="k">print</span> <span class="s">&#39;Downloaded file to </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">roads_shp_path</span>

<span class="c"># Reproject the Roads layer</span>
<span class="k">print</span> <span class="s">&#39;Reprojecting the roads layer&#39;</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">runalg</span><span class="p">(</span><span class="s">&#39;qgis:reprojectlayer&#39;</span><span class="p">,</span> <span class="n">roads_shp_path</span><span class="p">,</span> <span class="s">&#39;EPSG:3460&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;OUTPUT&#39;</span><span class="p">]</span>

<span class="c"># Clean the Roads layer</span>
<span class="k">print</span> <span class="s">&#39;Cleaning the roads layer&#39;</span>

<span class="n">processing</span><span class="o">.</span><span class="n">runalg</span><span class="p">(</span><span class="s">&quot;grass:v.clean&quot;</span><span class="p">,</span>
                  <span class="n">output</span><span class="p">,</span>
                  <span class="mi">1</span><span class="p">,</span>
                  <span class="mi">1</span><span class="p">,</span>
                  <span class="bp">None</span><span class="p">,</span>
                  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                  <span class="mf">0.0001</span><span class="p">,</span>
                  <span class="s">&#39;C:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">Ujaval</span><span class="se">\\</span><span class="s">Desktop</span><span class="se">\\</span><span class="s">clean.shp&#39;</span><span class="p">,</span>
                  <span class="s">&#39;C:\Users</span><span class="se">\\</span><span class="s">Ujaval</span><span class="se">\\</span><span class="s">Desktop</span><span class="se">\\</span><span class="s">errors.shp&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Success&#39;</span>
</pre></div>
</div>
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Ujaval Gandhi.<br/>
      Last updated on Feb 04, 2019.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=spatialthoughts" async="async"></script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/running_qgis_jobs.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>